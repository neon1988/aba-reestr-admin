import{a as y,Q as x}from"./QToolbar-BVmsPAij.js";import{Q as p}from"./QRadio-BVJajZFO.js";import{Q as V}from"./QCardSection-CkOy_myj.js";import{a as b,b as v,Q as P}from"./QItem-RUTCmYHM.js";import{Q as w}from"./QList-CuUpRKuw.js";import{Q as k}from"./QBanner-DJVY2J7f.js";import{Q as E}from"./QPagination-y4JE_fTs.js";import{Q as B,a as C}from"./QInnerLoading-DS7qhBsl.js";import{Q as F}from"./QPage-6isNs5ct.js";import{N as D,O as R,P as I,o as O,_ as T,S as l,T as u,U as o,V as s,Y as i,X as f,a3 as g,a4 as U,a5 as A,a0 as S}from"./index-B5fKhRmK.js";import{g as L,S as N}from"./SpecialistPhoto-BxeTyaXt.js";import{S as n}from"./StatusEnums-Cpn04w7a.js";import{u as q}from"./stat-store-Cg1KhQC1.js";import"./use-dark-CI_1RVc7.js";import"./QInput-Cq_516xi.js";import"./focus-manager-BJWzFvJg.js";import"./format-DyQxkAtJ.js";import"./use-transition-4mtm_1Sm.js";import"./ImageFullscreen-Dk6LiqVP.js";const j=D("specialists",{state:()=>({specialists:[],meta:{},currentPage:1,loading:!1,status:n.OnReview}),actions:{async fetchSpecialists(){this.loading=!0;try{const r=await L(this.status,this.currentPage);this.specialists=r.data.data,this.meta=r.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}}}}),z=R({__name:"IndexPage",setup(r,{expose:a}){a();const m=I(),e=j(),d=q(),_=()=>{e.currentPage=1,e.fetchSpecialists()},t=c=>{e.currentPage=c,e.fetchSpecialists()},Q=c=>{m.push({name:"specialists.show",params:{id:c.id}})};O(()=>{e.specialists.length===0&&(d.specialistsOnReviewCount>0?e.status=n.OnReview:e.status=n.Accepted),e.fetchSpecialists()});const h={router:m,store:e,statStore:d,applyFilter:_,handlePageChange:t,viewSpecialist:Q,get StatusEnum(){return n},SpecialistPhoto:N};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),G={key:1,class:"q-mt-md text-center"},M={key:2,class:"q-pa-lg flex flex-center"};function X(r,a,m,e,d,_){return l(),u(F,{padding:""},{default:o(()=>[s(x,null,{default:o(()=>[s(y,null,{default:o(()=>a[4]||(a[4]=[i("Специалисты")])),_:1})]),_:1}),s(V,{class:"q-mb-md"},{default:o(()=>[e.statStore.specialistsOnReviewCount>0?(l(),u(p,{key:0,modelValue:e.store.status,"onUpdate:modelValue":[a[0]||(a[0]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.OnReview,label:"На проверке"},null,8,["modelValue","val"])):f("",!0),s(p,{modelValue:e.store.status,"onUpdate:modelValue":[a[1]||(a[1]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Accepted,label:"Проверенные"},null,8,["modelValue","val"]),s(p,{modelValue:e.store.status,"onUpdate:modelValue":[a[2]||(a[2]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Rejected,label:"Отклоненные"},null,8,["modelValue","val"])]),_:1}),e.store.specialists.length>0?(l(),u(w,{key:0},{default:o(()=>[(l(!0),g(A,null,U(e.store.specialists,t=>(l(),u(b,{onClick:Q=>e.viewSpecialist(t),key:t.id,clickable:""},{default:o(()=>[s(v,{avatar:""},{default:o(()=>[s(e.SpecialistPhoto,{specialist:t,size:"4rem",fullscreen:!1,width:64,height:64},null,8,["specialist"])]),_:2},1024),s(v,null,{default:o(()=>[s(P,{class:"text-h6",lines:"1"},{default:o(()=>[i(S(t.lastname)+" "+S(t.firstname),1)]),_:2},1024),s(P,{caption:""},{default:o(()=>[i(S(t.middlename),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(l(),g("div",G,[s(k,null,{default:o(()=>a[5]||(a[5]=[i(" Нет специалистов ")])),_:1})])),e.store.meta.last_page>1?(l(),g("div",M,[e.store.meta?(l(),u(E,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[a[3]||(a[3]=t=>e.store.currentPage=t),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):f("",!0)])):f("",!0),s(C,{showing:e.store.loading},{default:o(()=>[s(B,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const ce=T(z,[["render",X],["__file","IndexPage.vue"]]);export{ce as default};
