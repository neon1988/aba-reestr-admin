import{Q as g}from"./use-transition-BxwYz9Om.js";import{M as _,r as w,f as s,_ as y,Q as n,R as u,S as d,a1 as C,Z as x,T as U,V,a4 as v}from"./index-BIoqSzkr.js";import{I as P}from"./ImageFullscreen-C2Mk_3OF.js";import{I as S}from"./ImageComponent-Ag6g7Cqh.js";const b=_({__name:"UserPhoto",props:{modelValue:{type:Object,required:!0},size:{type:String,default:"3rem"},fullscreen:{type:Boolean,default:!1},width:{type:Number||null,default:null},height:{type:Number||null,default:null},quality:{type:Number||null,default:null}},emits:["update:modelValue"],setup(i,{expose:l}){l();const e=i,t=w(!1),c=s(()=>e.modelValue.name?e.modelValue.name.split(" ").slice(0,2).map(r=>r.charAt(0).toUpperCase()).join(""):"U"),m=s(()=>{const a=["blue","green","red","purple","orange","teal"],r=Array.from(e.modelValue.name||"U").reduce((f,p)=>f+p.charCodeAt(0),0);return a[r%a.length]}),o=s(()=>{const a=e.modelValue.photo?.url;if(!a)return"";try{const r=new URL(a);return e.width&&r.searchParams.set("w",e.width.toString()),e.height&&r.searchParams.set("h",e.height.toString()),e.quality&&r.searchParams.set("q",e.quality.toString()),r.toString()}catch{}return a}),h={props:e,showFullscreen:t,initials:c,avatarColor:m,url:o,ImageFullscreen:P,ImageComponent:S};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),I={key:1};function k(i,l,e,t,c,m){return n(),u(v,{size:e.size,color:t.avatarColor,"text-color":"white",onClick:l[1]||(l[1]=o=>t.url&&(t.showFullscreen=!0))},{default:d(()=>[t.url?(n(),u(t.ImageComponent,{key:0,class:"avatar-image",url:t.url,alt:`${e.modelValue.name||"Пользователь"}'s avatar`,"max-width":e.width,"max-height":e.height},null,8,["url","alt","max-width","max-height"])):(n(),C("span",I,x(t.initials),1)),e.fullscreen&&t.url?(n(),u(t.ImageFullscreen,{key:2,show:t.showFullscreen,"onUpdate:show":l[0]||(l[0]=o=>t.showFullscreen=o)},{default:d(()=>[U(g,{src:t.url,"spinner-color":"primary","spinner-size":"82px",width:"100%",height:"100%",fit:"scale-down"},null,8,["src"])]),_:1},8,["show"])):V("",!0)]),_:1},8,["size","color"])}const N=y(b,[["render",k],["__scopeId","data-v-0c4ac4c8"],["__file","UserPhoto.vue"]]);export{N as U};
