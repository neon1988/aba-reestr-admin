import{a as C,Q as D}from"./QToolbar-CI-8HeAt.js";import{Q as w}from"./use-transition-C5Fhv03G.js";import{Q as m}from"./QInput-DOL_am1W.js";import{Q as y}from"./QCardSection-6KYxq1ge.js";import{M as B,N as E,r as v,w as g,a8 as U,_ as A,Q as p,R as V,S as u,T as a,W as S,V as x,Y as d,U as b}from"./index-C2qAptKT.js";import{Q as N}from"./QCardActions-DhvInvN5.js";import{Q as F}from"./QCard-CST_RLfO.js";import{Q as I}from"./QForm-_Drk5vvD.js";import{Q as P,a as T}from"./QInnerLoading-Bw9KGBGa.js";import{Q as k}from"./QPage-CvtTgG3i.js";import{u as O,U as q,a as c,b as R}from"./UploadFileComponent-CQfdWiTW.js";import"./use-dark-DHM-lo7H.js";import"./focus-manager-BJWzFvJg.js";import"./client-CS_TtsJ-.js";import"./QBadge-CGypSZDF.js";import"./QChip-BN83K63w.js";import"./format-DyQxkAtJ.js";const j=B({__name:"CreatePage",setup(_,{expose:e}){e();const n=E(),r=v(null),i=v(null),l=O("post",()=>"/webinars",{title:"",description:"",start_at:"",end_at:"",cover:[],stream_url:"",price:""}),o=()=>{l.submit().then(()=>{c("Вебинар успешно создан","success"),n.push("/webinars")}).catch(t=>{const{response:s}=t;if(s.status===422){const{opts:Q}=R(s.data);U.create(Q.value)}else c(s.data.message,"negative")})};g(r,t=>{t?l.start_at=new Date(t).toISOString():l.start_at=""}),g(i,t=>{t?l.end_at=new Date(t).toISOString():l.end_at=""});const f={router:n,startAt:r,endAt:i,form:l,submit:o,cancel:()=>{n.push("/webinars")},UploadFileComponent:q};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),z={class:"row q-col-gutter-sm"},G={class:"col-6"},L={class:"col-6"};function M(_,e,n,r,i,l){return p(),V(k,{padding:""},{default:u(()=>[a(D,null,{default:u(()=>[a(C,null,{default:u(()=>e[14]||(e[14]=[S("Создание нового вебинара")])),_:1})]),_:1}),a(I,{onSubmit:r.submit,valid:r.form.valid},{default:u(()=>[a(F,null,{default:u(()=>[a(y,null,{default:u(()=>[a(r.UploadFileComponent,{modelValue:r.form.cover,"onUpdate:modelValue":e[0]||(e[0]=o=>r.form.cover=o),label:"Выбрать обложку",error:r.form.invalid("cover"),"error-message":r.form.errors.cover,onChange:e[1]||(e[1]=o=>r.form.validate("cover"))},null,8,["modelValue","error","error-message"]),r.form.cover[0]?(p(),V(w,{key:0,src:r.form.cover[0].url,"spinner-color":"white",class:"q-mb-sm",style:{height:"10rem","max-width":"10rem"}},null,8,["src"])):x("",!0),a(m,{modelValue:r.form.title,"onUpdate:modelValue":e[2]||(e[2]=o=>r.form.title=o),label:"Название вебинара",error:r.form.invalid("title"),"error-message":r.form.errors.title,onChange:e[3]||(e[3]=o=>r.form.validate("title"))},null,8,["modelValue","error","error-message"]),a(m,{modelValue:r.form.description,"onUpdate:modelValue":e[4]||(e[4]=o=>r.form.description=o),label:"Описание вебинара",type:"textarea",error:r.form.invalid("description"),"error-message":r.form.errors.description,onChange:e[5]||(e[5]=o=>r.form.validate("description"))},null,8,["modelValue","error","error-message"]),a(m,{modelValue:r.form.stream_url,"onUpdate:modelValue":e[6]||(e[6]=o=>r.form.stream_url=o),label:"Ссылка на трансляцию",error:r.form.invalid("stream_url"),"error-message":r.form.errors.stream_url,onChange:e[7]||(e[7]=o=>r.form.validate("stream_url"))},null,8,["modelValue","error","error-message"]),a(m,{modelValue:r.form.price,"onUpdate:modelValue":e[8]||(e[8]=o=>r.form.price=o),label:"Цена",error:r.form.invalid("price"),"error-message":r.form.errors.price,onChange:e[9]||(e[9]=o=>r.form.validate("price"))},null,8,["modelValue","error","error-message"]),d("div",z,[d("div",G,[a(m,{modelValue:r.startAt,"onUpdate:modelValue":e[10]||(e[10]=o=>r.startAt=o),label:"Дата начала",type:"datetime-local",error:r.form.invalid("start_at"),"error-message":r.form.errors.start_at,onBlur:e[11]||(e[11]=o=>r.form.validate("start_at"))},null,8,["modelValue","error","error-message"])]),d("div",L,[a(m,{modelValue:r.endAt,"onUpdate:modelValue":e[12]||(e[12]=o=>r.endAt=o),label:"Дата окончания",type:"datetime-local",error:r.form.invalid("end_at"),"error-message":r.form.errors.end_at,onBlur:e[13]||(e[13]=o=>r.form.validate("end_at"))},null,8,["modelValue","error","error-message"])])])]),_:1}),a(N,null,{default:u(()=>[a(b,{label:"Создать вебинар",type:"submit",color:"primary",disabled:r.form.processing},null,8,["disabled"]),a(b,{label:"Отмена",color:"secondary",onClick:r.cancel})]),_:1})]),_:1})]),_:1},8,["valid"]),a(T,{showing:r.form.processing},{default:u(()=>[a(P,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const ir=A(j,[["render",M],["__file","CreatePage.vue"]]);export{ir as default};
