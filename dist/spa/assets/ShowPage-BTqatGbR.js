import{M as Q,r as h,f as C,_ as E,Q as o,R as l,S as i,V as d,T as r,a4 as x,N as F,o as B,U as g,W as p,Y as _,Z as S,a1 as P}from"./index-Bc0R355J.js";import{a as D,Q as I}from"./QToolbar-fsbRQWuM.js";import{Q as y}from"./QChip-BcyO6mis.js";import{Q as q}from"./QCardSection-CMAUuuie.js";import{Q as j}from"./QCardActions-vgdUSFOZ.js";import{Q as N}from"./QCard-DxBq4jcz.js";import{Q as A,a as z}from"./QInnerLoading-BHVqACUk.js";import{Q as T}from"./QPage-SQbvXMJf.js";import{u as R}from"./use-quasar-DcVA38-x.js";import{a as H,b as O,r as U}from"./specialists-Bq8c3ZqA.js";import{S as V}from"./StatusEnums-Cpn04w7a.js";import{I as L,Q as M}from"./ImageFullscreen-BMuWzocu.js";import{I as G}from"./ImageComponent-m-e6C0wA.js";import{D as W}from"./DateTime-DAWuHm1q.js";import{u as Y}from"./stat-store-D9nhWtHV.js";import{F as Z}from"./FilesList-oGmI77R4.js";import"./use-dark-B6AwncSa.js";import"./focus-manager-zjdVGI5d.js";import"./date-BaulYPxB.js";import"./format-DyQxkAtJ.js";import"./QItem-BlZjPOp4.js";import"./QList-BbXI1HLq.js";import"./QBanner-B7nCSk7H.js";const J=Q({__name:"SpecialistPhoto",props:{specialist:{type:Object,required:!0},size:{type:String,default:"3rem"},fullscreen:{type:Boolean,default:!1},width:{type:Number||null,default:null},height:{type:Number||null,default:null},quality:{type:Number||null,default:null}},setup(f,{expose:t}){t();const a=f,e=h(!1),n=h(a.specialist.photo?.url||null),c=C(()=>{if(!n.value)return"";try{const s=new URL(n.value);return a.width&&s.searchParams.set("w",a.width.toString()),a.height&&s.searchParams.set("h",a.height.toString()),a.quality&&s.searchParams.set("q",a.quality.toString()),s.toString()}catch{}return n.value}),u={props:a,showFullscreen:e,url:n,computedImageUrl:c,ImageFullscreen:L,ImageComponent:G};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}});function K(f,t,a,e,n,c){return o(),l(x,{size:a.size,onClick:t[1]||(t[1]=u=>e.url&&(e.showFullscreen=!0))},{default:i(()=>[e.url?(o(),l(e.ImageComponent,{key:0,class:"avatar-image",alt:`${a.specialist.name||"Пользователь"}'s avatar`,url:e.computedImageUrl,"max-width":a.width,"max-height":a.height},null,8,["alt","url","max-width","max-height"])):d("",!0),a.fullscreen&&e.url?(o(),l(e.ImageFullscreen,{key:1,show:e.showFullscreen,"onUpdate:show":t[0]||(t[0]=u=>e.showFullscreen=u)},{default:i(()=>[r(M,{src:e.url,"spinner-color":"primary","spinner-size":"82px",width:"100%",height:"100%",fit:"scale-down"},null,8,["src"])]),_:1},8,["show"])):d("",!0)]),_:1},8,["size"])}const X=E(J,[["render",K],["__scopeId","data-v-e7766d39"],["__file","SpecialistPhoto.vue"]]),$=Q({__name:"ShowPage",props:{id:{type:Number,required:!0}},setup(f,{expose:t}){t();const a=f,e=R(),n=F(),c=Y(),u=h(!1),s=h(null),v=async()=>{u.value=!0;try{const m=await H(a.id);s.value=m.data.data}finally{u.value=!1}},b=async()=>{if(s.value){u.value=!0;try{const m=await O(s.value.id);s.value=m.data.specialist,e.notify({message:m.data.message,color:"positive",position:"top",timeout:3e3}),await c.fetchStats()}finally{u.value=!1}}},k=async()=>{if(s.value){u.value=!0;try{const m=await U(s.value.id);s.value=m.data.specialist,e.notify({message:m.data.message,color:"positive",position:"top",timeout:3e3}),await c.fetchStats()}finally{u.value=!1}}};B(()=>{v()});const w={props:a,$q:e,router:n,statStore:c,loading:u,specialist:s,fetchSpecialistHandler:v,approveSpecialistHandler:b,rejectSpecialistHandler:k,get StatusEnum(){return V},SpecialistPhoto:X,DateTime:W,FilesList:Z};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),ee={class:"text-h6"},te={class:"q-mt-sm"},ae={class:"q-mt-sm"},ue={key:3,class:"q-mt-sm"};function se(f,t,a,e,n,c){return e.specialist?(o(),l(T,{key:0,padding:""},{default:i(()=>[r(I,null,{default:i(()=>[r(g,{flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=u=>e.router.go(-1))}),r(D,null,{default:i(()=>t[1]||(t[1]=[p("Информация о специалисте")])),_:1})]),_:1}),r(e.SpecialistPhoto,{specialist:e.specialist,fullscreen:!0,size:"14rem",width:224,height:224,class:"q-mb-md cursor-pointer"},null,8,["specialist"]),r(N,{bordered:""},{default:i(()=>[r(q,null,{default:i(()=>[_("div",ee,S(e.specialist.lastname)+" "+S(e.specialist.name),1),e.specialist.status===e.StatusEnum.Accepted?(o(),l(y,{key:0,color:"green","text-color":"white",icon:"check"},{default:i(()=>t[2]||(t[2]=[p(" Подтверждён ")])),_:1})):e.specialist.status===e.StatusEnum.Rejected?(o(),l(y,{key:1,color:"red","text-color":"white",icon:"block"},{default:i(()=>t[3]||(t[3]=[p(" Отклонён ")])),_:1})):e.specialist.status===e.StatusEnum.OnReview?(o(),l(y,{key:2,color:"orange","text-color":"white",icon:"hourglass_empty"},{default:i(()=>t[4]||(t[4]=[p(" На проверке ")])),_:1})):d("",!0),_("div",te,"Телефон: "+S(e.specialist.phone),1),_("div",ae,[t[5]||(t[5]=p(" Дата регистрации: ")),r(e.DateTime,{"raw-date":e.specialist.created_at},null,8,["raw-date"])]),e.specialist.files?(o(),P("div",ue,[t[6]||(t[6]=p(" Документы: ")),r(e.FilesList,{files:e.specialist.files},null,8,["files"])])):d("",!0)]),_:1}),r(j,null,{default:i(()=>[e.specialist.status!=e.StatusEnum.Accepted&&!e.loading?(o(),l(g,{key:0,label:"Подтвердить",color:"green",onClick:e.approveSpecialistHandler})):d("",!0),e.specialist.status!=e.StatusEnum.Rejected&&!e.loading?(o(),l(g,{key:1,label:"Отклонить",color:"red",onClick:e.rejectSpecialistHandler})):d("",!0)]),_:1})]),_:1}),r(z,{showing:e.loading},{default:i(()=>[r(A,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})):d("",!0)}const Fe=E($,[["render",se],["__file","ShowPage.vue"]]);export{Fe as default};
