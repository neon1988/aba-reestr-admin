import{a as y,Q}from"./QToolbar-CNCw81R0.js";import{Q as n}from"./QInput-bEU_ILxu.js";import{a as w,b as B}from"./use-transition-BxwYz9Om.js";import{c as S,f as U,h as p,M as x,N as E,r as F,a8 as k,_ as T,Q as m,R as s,S as a,T as l,W as D,V as g,U as c}from"./index-BIoqSzkr.js";import{Q as I}from"./QCardSection-LiU8wvIw.js";import{Q as N}from"./QCardActions-DEAdkGD4.js";import{Q as P}from"./QCard-Dop7LUhk.js";import{Q as _}from"./QForm-QZJhxQwP.js";import{Q as q,a as R}from"./QInnerLoading-CPQATF6z.js";import{Q as h}from"./QPage-C23wwPzr.js";import{u as A,U as j,a as v,b as z}from"./UploadFileComponent-CAoCHX6r.js";import{T as G}from"./TagInput-CwcY1eE4.js";import{I as L}from"./ImageComponent-Ag6g7Cqh.js";import"./use-dark-r3gEVHE7.js";import"./focus-manager-BJWzFvJg.js";import"./client-BvPwPSEG.js";import"./QBadge-WlIihQSA.js";import"./QChip-V35jz08L.js";import"./format-DyQxkAtJ.js";import"./QItem-CSPSlXK2.js";import"./QSelect-CUtVqXtZ.js";import"./selection-CUW-9SO2.js";import"./QDialog-Dt0TXRkh.js";const M=S({name:"QVideo",props:{...w,src:{type:String,required:!0},title:String,fetchpriority:{type:String,default:"auto"},loading:{type:String,default:"eager"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin"}},setup(u){const e=B(u),i=U(()=>"q-video"+(u.ratio!==void 0?" q-video--responsive":""));return()=>p("div",{class:i.value,style:e.value},[p("iframe",{src:u.src,title:u.title,fetchpriority:u.fetchpriority,loading:u.loading,referrerpolicy:u.referrerpolicy,frameborder:"0",allowfullscreen:!0})])}}),O=x({__name:"CreatePage",setup(u,{expose:e}){e();const i=E(),r=A("post",()=>"/worksheets",{title:"",description:"",cover:void 0,price:"",file:void 0,tags:[]}),d=F(null),f={router:i,form:r,previewFile:d,submit:()=>{r.submit().then(()=>{v("Материал успешно создан","success"),i.push("/worksheets")}).catch(V=>{const{response:t}=V;if(t.status===422){const{opts:b}=z(t.data);k.create(b.value)}else v(t.data.message,"negative")})},cancel:()=>{i.push("/worksheets")},UploadFileComponent:j,TagInput:G,ImageComponent:L};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}});function W(u,e,i,r,d,C){return m(),s(h,{padding:""},{default:a(()=>[l(Q,null,{default:a(()=>[l(y,null,{default:a(()=>e[11]||(e[11]=[D("Создание нового материала")])),_:1})]),_:1}),l(_,{onSubmit:r.submit,valid:r.form.valid},{default:a(()=>[l(P,null,{default:a(()=>[l(I,null,{default:a(()=>[l(r.UploadFileComponent,{modelValue:r.form.cover,"onUpdate:modelValue":e[0]||(e[0]=o=>r.form.cover=o),label:"Выбрать обложку",error:r.form.invalid("cover"),"error-message":r.form.errors.cover,onChange:e[1]||(e[1]=o=>r.form.validate("cover"))},null,8,["modelValue","error","error-message"]),r.form.cover?(m(),s(r.ImageComponent,{key:0,url:r.form.cover.url,"spinner-color":"white",class:"q-mb-sm","max-width":200,"max-height":200},null,8,["url"])):g("",!0),l(n,{modelValue:r.form.title,"onUpdate:modelValue":e[2]||(e[2]=o=>r.form.title=o),label:"Название материала",error:r.form.invalid("title"),"error-message":r.form.errors.title,onChange:e[3]||(e[3]=o=>r.form.validate("title"))},null,8,["modelValue","error","error-message"]),l(n,{modelValue:r.form.description,"onUpdate:modelValue":e[4]||(e[4]=o=>r.form.description=o),label:"Описание материала",type:"textarea",error:r.form.invalid("description"),"error-message":r.form.errors.description,onChange:e[5]||(e[5]=o=>r.form.validate("description"))},null,8,["modelValue","error","error-message"]),l(n,{modelValue:r.form.price,"onUpdate:modelValue":e[6]||(e[6]=o=>r.form.price=o),label:"Цена",error:r.form.invalid("price"),"error-message":r.form.errors.price,onChange:e[7]||(e[7]=o=>r.form.validate("price"))},null,8,["modelValue","error","error-message"]),l(r.TagInput,{modelValue:r.form.tags,"onUpdate:modelValue":e[8]||(e[8]=o=>r.form.tags=o),label:"Выберите теги"},null,8,["modelValue"]),l(r.UploadFileComponent,{modelValue:r.form.file,"onUpdate:modelValue":e[9]||(e[9]=o=>r.form.file=o),label:"Выбрать файл",error:r.form.invalid("file"),"error-message":r.form.errors.file,onChange:e[10]||(e[10]=o=>r.form.validate("file"))},null,8,["modelValue","error","error-message"]),r.previewFile?(m(),s(M,{key:1,"spinner-color":"white",src:r.previewFile.url},null,8,["src"])):g("",!0)]),_:1}),l(N,null,{default:a(()=>[l(c,{label:"Создать материал",type:"submit",color:"primary",disabled:r.form.processing},null,8,["disabled"]),l(c,{label:"Отмена",color:"secondary",onClick:r.cancel})]),_:1})]),_:1})]),_:1},8,["valid"]),l(R,{showing:r.form.processing},{default:a(()=>[l(q,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const vr=T(O,[["render",W],["__file","CreatePage.vue"]]);export{vr as default};
