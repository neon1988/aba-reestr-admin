import{a as x,Q as v}from"./QToolbar-CEuFyT6Z.js";import{L as k,M as D,N as V,r as w,o as E,_ as W,Q as o,R as s,S as u,T as r,W as i,U,a1 as g,a2 as C,a3 as S,V as d,Z as B}from"./index-BxnUEOI2.js";import{Q as h}from"./QCardSection--R8S2_qP.js";import{Q as b}from"./QRadio-o3R8Ivfx.js";import{Q as I}from"./use-transition-DzTuADDw.js";import{a as T,b as y,Q as p}from"./QItem-BcQz8W-I.js";import{Q as F}from"./QList-Cc0hCThL.js";import{Q as L}from"./QBanner-B5G2Blgx.js";import{Q as N}from"./QPagination-CI8WENMo.js";import{Q as R,a as q}from"./QInnerLoading-p24VyKTR.js";import{Q as M}from"./QPage-BP8QheXg.js";import{g as j,a as z}from"./webinars-B70YhMIC.js";import{D as A}from"./DateTime-DwTDd35A.js";import"./use-dark-CwjNl933.js";import"./option-sizes-q6w8WZAa.js";import"./QInput-Bo2FGZCO.js";import"./focus-manager-BJWzFvJg.js";import"./format-DyQxkAtJ.js";import"./date-DmRCHM03.js";const G=k("webinars",{state:()=>({webinars:[],meta:{},currentPage:1,loading:!1}),actions:{async fetchUpcomingWebinars(){this.loading=!0;try{const n=await j(this.currentPage);this.webinars=n.data.data,this.meta=n.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}},async fetchEndedWebinars(){this.loading=!0;try{const n=await z(this.currentPage);this.webinars=n.data.data,this.meta=n.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}},setPage(n){this.currentPage=n}}}),O=D({__name:"IndexPage",setup(n,{expose:t}){t();const c=V(),e=G(),m=w("Upcoming"),l=()=>{m.value==="Upcoming"?e.fetchUpcomingWebinars():m.value==="Ended"&&e.fetchEndedWebinars()},a=()=>{e.currentPage=1,l()},_=f=>{e.currentPage=f,l()},P=f=>{c.push({name:"webinars.edit",params:{id:f.id}})};E(()=>{l()});const Q={router:c,store:e,status:m,fetchWebinars:l,applyFilter:a,handlePageChange:_,viewWebinar:P,DateTime:A};return Object.defineProperty(Q,"__isScriptSetup",{enumerable:!1,value:!0}),Q}}),Z={key:1,class:"q-mt-md text-center"},H={key:2,class:"q-pa-lg flex flex-center"};function J(n,t,c,e,m,l){return o(),s(M,{padding:""},{default:u(()=>[r(v,null,{default:u(()=>[r(x,null,{default:u(()=>t[3]||(t[3]=[i("Вебинары")])),_:1})]),_:1}),r(h,null,{default:u(()=>[r(U,{label:"Создать вебинар",color:"green",to:{name:"webinars.create"}})]),_:1}),r(h,null,{default:u(()=>[r(b,{modelValue:e.status,"onUpdate:modelValue":[t[0]||(t[0]=a=>e.status=a),e.applyFilter],val:"Upcoming",label:"Предстоящие"},null,8,["modelValue"]),r(b,{modelValue:e.status,"onUpdate:modelValue":[t[1]||(t[1]=a=>e.status=a),e.applyFilter],val:"Ended",label:"Завершенные"},null,8,["modelValue"])]),_:1}),e.store.webinars.length>0?(o(),s(F,{key:0},{default:u(()=>[(o(!0),g(S,null,C(e.store.webinars,a=>(o(),s(T,{onClick:_=>e.viewWebinar(a),key:a.id,clickable:""},{default:u(()=>[r(y,{avatar:""},{default:u(()=>[a.cover?(o(),s(I,{key:0,src:a.cover.url,alt:"cover",width:"50px",height:"50px"},null,8,["src"])):d("",!0)]),_:2},1024),r(y,null,{default:u(()=>[r(p,{class:"text-h6",lines:"1"},{default:u(()=>[i(B(a.title),1)]),_:2},1024),a.start_at?(o(),s(p,{key:0,caption:""},{default:u(()=>[t[4]||(t[4]=i(" Дата начала: ")),r(e.DateTime,{"raw-date":a.start_at},null,8,["raw-date"])]),_:2},1024)):d("",!0),a.end_at?(o(),s(p,{key:1,caption:""},{default:u(()=>[t[5]||(t[5]=i(" Дата окончания: ")),r(e.DateTime,{"raw-date":a.end_at},null,8,["raw-date"])]),_:2},1024)):d("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(o(),g("div",Z,[r(L,null,{default:u(()=>t[6]||(t[6]=[i(" Нет вебинаров ")])),_:1})])),e.store.meta.last_page>1?(o(),g("div",H,[e.store.meta?(o(),s(N,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[t[2]||(t[2]=a=>e.store.currentPage=a),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):d("",!0)])):d("",!0),r(q,{showing:e.store.loading},{default:u(()=>[r(R,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const pe=W(O,[["render",J],["__file","IndexPage.vue"]]);export{pe as default};
