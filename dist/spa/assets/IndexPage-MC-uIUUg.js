import{a as y,Q as P}from"./QToolbar-CI-8HeAt.js";import{Q as g}from"./QRadio-1X2r3pos.js";import{Q as x}from"./QCardSection-6KYxq1ge.js";import{a as V,b as C,Q as v}from"./QItem-YVcShCjz.js";import{Q as b}from"./QList-DZ7ZkuDj.js";import{Q as k}from"./QBanner-BugwmxBh.js";import{Q as w}from"./QPagination-CmLaF_13.js";import{a as E,Q as D}from"./QInnerLoading-Bw9KGBGa.js";import{Q as R}from"./QPage-CvtTgG3i.js";import{L as B,M as F,N as I,o as O,_ as L,Q as s,R as n,S as r,T as o,W as u,V as i,a1 as p,a2 as T,a3 as A,Z as S}from"./index-C2qAptKT.js";import{g as N,C as U}from"./CenterPhoto-CteVsejf.js";import{S as m}from"./StatusEnums-Cpn04w7a.js";import{u as q}from"./stat-store-DShDNWlF.js";import"./use-dark-DHM-lo7H.js";import"./option-sizes-CHVm2eIZ.js";import"./QInput-DOL_am1W.js";import"./focus-manager-BJWzFvJg.js";import"./format-DyQxkAtJ.js";import"./use-transition-C5Fhv03G.js";import"./ImageFullscreen-Br8n97Em.js";import"./QDialog-BydNBss-.js";const j=B("centers",{state:()=>({centers:[],meta:{},currentPage:1,loading:!1,status:m.OnReview}),actions:{async fetchCenters(){this.loading=!0;try{const l=await N(this.status,this.currentPage);this.centers=l.data.data,this.meta=l.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}}}}),z=F({__name:"IndexPage",setup(l,{expose:a}){a();const d=I(),e=j(),c=q(),_=()=>{e.currentPage=1,e.fetchCenters()},t=f=>{e.currentPage=f,e.fetchCenters()},Q=f=>{d.push({name:"centers.show",params:{id:f.id}})};O(()=>{e.centers.length===0&&(c.centersOnReviewCount>0?e.status=m.OnReview:e.status=m.Accepted),e.fetchCenters()});const h={router:d,store:e,statStore:c,applyFilter:_,handlePageChange:t,viewCenter:Q,get StatusEnum(){return m},CenterPhoto:U};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),M={key:1,class:"q-mt-md text-center"},G={key:2,class:"q-pa-lg flex flex-center"};function W(l,a,d,e,c,_){return s(),n(R,{padding:""},{default:r(()=>[o(P,null,{default:r(()=>[o(y,null,{default:r(()=>a[4]||(a[4]=[u("Центры")])),_:1})]),_:1}),o(x,{class:"q-mb-md"},{default:r(()=>[e.statStore.centersOnReviewCount>0?(s(),n(g,{key:0,modelValue:e.store.status,"onUpdate:modelValue":[a[0]||(a[0]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.OnReview,label:"На проверке"},null,8,["modelValue","val"])):i("",!0),o(g,{modelValue:e.store.status,"onUpdate:modelValue":[a[1]||(a[1]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Accepted,label:"Проверенные"},null,8,["modelValue","val"]),o(g,{modelValue:e.store.status,"onUpdate:modelValue":[a[2]||(a[2]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Rejected,label:"Отклоненные"},null,8,["modelValue","val"])]),_:1}),e.store.centers.length>0?(s(),n(b,{key:0},{default:r(()=>[(s(!0),p(A,null,T(e.store.centers,t=>(s(),n(V,{onClick:Q=>e.viewCenter(t),key:t.id,clickable:""},{default:r(()=>[o(C,{avatar:""},{default:r(()=>[o(e.CenterPhoto,{center:t,size:"4rem",fullscreen:!1,width:256,height:256},null,8,["center"])]),_:2},1024),o(C,null,{default:r(()=>[o(v,{class:"text-h6",lines:"1"},{default:r(()=>[u(S(t.name),1)]),_:2},1024),o(v,{caption:""},{default:r(()=>[u(S(t.legal_name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(s(),p("div",M,[o(k,null,{default:r(()=>a[5]||(a[5]=[u(" Нет центров ")])),_:1})])),e.store.meta.last_page>1?(s(),p("div",G,[e.store.meta?(s(),n(w,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[a[3]||(a[3]=t=>e.store.currentPage=t),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):i("",!0)])):i("",!0),e.store.loading?(s(),n(E,{key:3,showing:e.store.loading},{default:r(()=>[o(D,{size:"5rem",color:"primary"})]),_:1},8,["showing"])):i("",!0)]),_:1})}const ge=L(z,[["render",W],["__file","IndexPage.vue"]]);export{ge as default};
