import{a as y,Q as P}from"./QToolbar-BjnzGdn8.js";import{Q as p}from"./QRadio-mDzw-Udm.js";import{Q as x}from"./QCardSection-Cap8E1vc.js";import{a as V,b as v,Q as b}from"./QItem-Bgl7Ytt_.js";import{Q as w}from"./QList-uR4EfkRv.js";import{Q as E}from"./QBanner-jWbQfy7s.js";import{Q as k}from"./QPagination-CQ_WDjyQ.js";import{Q as C,a as B}from"./QInnerLoading-Dvj6N35R.js";import{Q as F}from"./QPage-Cs4qjIpF.js";import{L as R,M as D,N as I,o as A,_ as O,Q as o,R as i,S as r,T as s,W as n,V as f,a1 as g,a2 as L,a3 as T,Z as S}from"./index-3CeRA5gR.js";import{g as N}from"./specialists-CvKg3gs1.js";import{S as u}from"./StatusEnums-Cpn04w7a.js";import{S as U}from"./SpecialistPhoto-DX1LlRPg.js";import{u as q}from"./stat-store-DlnDfx8a.js";import"./use-dark-Dg6r_JxN.js";import"./option-sizes-CopGo5Zg.js";import"./QInput-CHFEuogG.js";import"./focus-manager-BJWzFvJg.js";import"./format-DyQxkAtJ.js";import"./use-transition-By_GSWr4.js";import"./ImageFullscreen-BSdtIV-9.js";import"./QDialog-tWG2j4rv.js";const j=R("specialists",{state:()=>({specialists:[],meta:{},currentPage:1,loading:!1,search:"",status:u.OnReview,controller:null}),actions:{async fetchSpecialists(){this.loading&&this.controller&&this.controller.abort(),this.controller=new AbortController,this.loading=!0;try{const l=await N(this.search,this.status,this.currentPage);this.specialists=l.data.data,this.meta=l.data.meta,this.currentPage=this.meta.current_page}catch(l){if(l instanceof Error&&l.name==="AbortError")return}finally{this.controller.signal.aborted||(this.controller=null,this.loading=!1)}}}}),z=D({__name:"IndexPage",setup(l,{expose:a}){a();const m=I(),e=j(),d=q(),h=()=>{e.currentPage=1,e.fetchSpecialists()},t=c=>{e.currentPage=c,e.fetchSpecialists()},_=c=>{m.push({name:"specialists.edit",params:{id:c.id}})};A(()=>{e.specialists.length===0&&(d.specialistsOnReviewCount>0?e.status=u.OnReview:e.status=u.Accepted),e.fetchSpecialists()});const Q={router:m,store:e,statStore:d,applyFilter:h,handlePageChange:t,viewSpecialist:_,get StatusEnum(){return u},SpecialistPhoto:U};return Object.defineProperty(Q,"__isScriptSetup",{enumerable:!1,value:!0}),Q}}),M={key:1,class:"q-mt-md text-center"},G={key:2,class:"q-pa-lg flex flex-center"};function W(l,a,m,e,d,h){return o(),i(F,{padding:""},{default:r(()=>[s(P,null,{default:r(()=>[s(y,null,{default:r(()=>a[4]||(a[4]=[n("Специалисты")])),_:1})]),_:1}),s(x,{class:"q-mb-md"},{default:r(()=>[e.statStore.specialistsOnReviewCount>0?(o(),i(p,{key:0,modelValue:e.store.status,"onUpdate:modelValue":[a[0]||(a[0]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.OnReview,label:"На проверке"},null,8,["modelValue","val"])):f("",!0),s(p,{modelValue:e.store.status,"onUpdate:modelValue":[a[1]||(a[1]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Accepted,label:"Проверенные"},null,8,["modelValue","val"]),s(p,{modelValue:e.store.status,"onUpdate:modelValue":[a[2]||(a[2]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Rejected,label:"Отклоненные"},null,8,["modelValue","val"])]),_:1}),e.store.specialists.length>0?(o(),i(w,{key:0},{default:r(()=>[(o(!0),g(T,null,L(e.store.specialists,t=>(o(),i(V,{onClick:_=>e.viewSpecialist(t),key:t.id,clickable:""},{default:r(()=>[s(v,{avatar:""},{default:r(()=>[s(e.SpecialistPhoto,{specialist:t,size:"4rem",fullscreen:!1,width:128,height:128},null,8,["specialist"])]),_:2},1024),s(v,null,{default:r(()=>[s(b,{class:"text-h6",lines:"1"},{default:r(()=>[n(S(t.name)+" "+S(t.lastname),1)]),_:2},1024),s(b,{caption:""},{default:r(()=>[n(S(t.middlename),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(o(),g("div",M,[s(E,null,{default:r(()=>a[5]||(a[5]=[n(" Нет специалистов ")])),_:1})])),e.store.meta.last_page>1?(o(),g("div",G,[e.store.meta?(o(),i(k,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[a[3]||(a[3]=t=>e.store.currentPage=t),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):f("",!0)])):f("",!0),s(B,{showing:e.store.loading},{default:r(()=>[s(C,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const ge=O(z,[["render",W],["__file","IndexPage.vue"]]);export{ge as default};
