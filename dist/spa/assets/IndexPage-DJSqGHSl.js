import{a as P,Q as b}from"./QToolbar-BVmsPAij.js";import{Q as f}from"./QRadio-BVJajZFO.js";import{Q as y}from"./QCardSection-CkOy_myj.js";import{a as V,b as S,Q as B}from"./QItem-RUTCmYHM.js";import{Q as x}from"./QList-CuUpRKuw.js";import{Q as w}from"./QBanner-DJVY2J7f.js";import{Q as k}from"./QPagination-y4JE_fTs.js";import{Q as E,a as C}from"./QInnerLoading-DS7qhBsl.js";import{Q as F}from"./QPage-6isNs5ct.js";import{N as D,O as R,P as U,o as I,_ as O,S as o,T as u,U as l,V as r,Y as c,X as p,a3 as g,a4 as T,a5 as L,a0 as _,$ as A}from"./index-B5fKhRmK.js";import{g as N}from"./bulletins-BRYsb03t.js";import{S as n}from"./StatusEnums-Cpn04w7a.js";import{u as q}from"./stat-store-Cg1KhQC1.js";import{U as M}from"./UserPhoto-DXK6EKRq.js";import"./use-dark-CI_1RVc7.js";import"./QInput-Cq_516xi.js";import"./focus-manager-BJWzFvJg.js";import"./format-DyQxkAtJ.js";import"./use-transition-4mtm_1Sm.js";import"./ImageFullscreen-Dk6LiqVP.js";const j=D("bulletins",{state:()=>({bulletins:[],meta:{},currentPage:1,loading:!1,status:n.OnReview}),actions:{async fetchBulletins(){this.loading=!0;try{const s=await N(this.status,this.currentPage);this.bulletins=s.data.data,this.meta=s.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}}}}),z=R({__name:"IndexPage",setup(s,{expose:a}){a();const i=U(),e=j(),m=q(),Q=()=>{e.currentPage=1,e.fetchBulletins()},t=d=>{e.currentPage=d,e.fetchBulletins()},h=d=>{i.push({name:"bulletins.show",params:{id:d.id}})};I(()=>{e.bulletins.length===0&&(m.bulletinsOnReviewCount>0?e.status=n.OnReview:e.status=n.Accepted),e.fetchBulletins()});const v={router:i,store:e,statStore:m,applyFilter:Q,handlePageChange:t,viewBulletin:h,get StatusEnum(){return n},UserPhoto:M};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),H=["innerHTML"],G={key:1,class:"q-mt-md text-center"},X={key:2,class:"q-pa-lg flex flex-center"};function Y(s,a,i,e,m,Q){return o(),u(F,{padding:""},{default:l(()=>[r(b,null,{default:l(()=>[r(P,null,{default:l(()=>a[4]||(a[4]=[c("Объявления")])),_:1})]),_:1}),r(y,{class:"q-mb-md"},{default:l(()=>[e.statStore.bulletinsOnReviewCount>0?(o(),u(f,{key:0,modelValue:e.store.status,"onUpdate:modelValue":[a[0]||(a[0]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.OnReview,label:"На проверке"},null,8,["modelValue","val"])):p("",!0),r(f,{modelValue:e.store.status,"onUpdate:modelValue":[a[1]||(a[1]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Accepted,label:"Проверенные"},null,8,["modelValue","val"]),r(f,{modelValue:e.store.status,"onUpdate:modelValue":[a[2]||(a[2]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Rejected,label:"Отклоненные"},null,8,["modelValue","val"])]),_:1}),e.store.bulletins.length>0?(o(),u(x,{key:0},{default:l(()=>[(o(!0),g(L,null,T(e.store.bulletins,t=>(o(),u(V,{onClick:h=>e.viewBulletin(t),key:t.id,clickable:""},{default:l(()=>[r(S,{avatar:"",top:""},{default:l(()=>[r(e.UserPhoto,{user:t.creator,size:"4rem",fullscreen:!1,width:64,height:64},null,8,["user"])]),_:2},1024),r(S,null,{default:l(()=>[r(B,null,{default:l(()=>[c(_(t.creator.name)+" "+_(t.creator.lastname)+" "+_(t.creator.middlename),1)]),_:2},1024),r(B,null,{default:l(()=>[A("span",{innerHTML:t.text.replace(/\n/g,"<br>")},null,8,H)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(o(),g("div",G,[r(w,null,{default:l(()=>a[5]||(a[5]=[c(" Нет специалистов ")])),_:1})])),e.store.meta.last_page>1?(o(),g("div",X,[e.store.meta?(o(),u(k,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[a[3]||(a[3]=t=>e.store.currentPage=t),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):p("",!0)])):p("",!0),r(C,{showing:e.store.loading},{default:l(()=>[r(E,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const ge=O(z,[["render",Y],["__file","IndexPage.vue"]]);export{ge as default};
