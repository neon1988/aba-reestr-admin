import{a as P,Q as x}from"./QToolbar-BiMzdSH1.js";import{Q as f}from"./QRadio-BzKcSLeQ.js";import{Q as V}from"./QCardSection-d4ebZ8Jd.js";import{Q as v}from"./ImageFullscreen-D_JowLWA.js";import{b,a as w,Q as y}from"./QList-NYyNkstu.js";import{Q as k}from"./QBanner-B5gWPA-k.js";import{Q as E}from"./QPagination-CfHhOZsF.js";import{Q as B,a as C}from"./QInnerLoading-DA1P_EJf.js";import{Q as F}from"./QPage-BFCFRqG0.js";import{a3 as D,N as R,Q as I,o as O,_ as T,S as o,T as u,U as l,V as s,Y as i,X as p,a4 as g,a5 as U,a6 as A,a0 as S}from"./index-DjZidwi3.js";import{g as L,S as N}from"./SpecialistPhoto-DneXtQcN.js";import{S as n}from"./StatusEnums-Cpn04w7a.js";import{u as q}from"./stat-store-Cw5pLPK1.js";import"./use-dark-D_lfRTDq.js";import"./QInput-CHeOjWWK.js";import"./focus-manager-zjdVGI5d.js";const j=D("specialists",{state:()=>({specialists:[],meta:{},currentPage:1,loading:!1,status:n.OnReview}),actions:{async fetchSpecialists(){this.loading=!0;try{const r=await L(this.status,this.currentPage);this.specialists=r.data.data,this.meta=r.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}}}}),z=R({__name:"IndexPage",setup(r,{expose:a}){a();const m=I(),e=j(),d=q(),_=()=>{e.currentPage=1,e.fetchSpecialists()},t=c=>{e.currentPage=c,e.fetchSpecialists()},Q=c=>{m.push({name:"specialists.show",params:{id:c.id}})};O(()=>{e.specialists.length===0&&(d.specialistsOnReviewCount>0?e.status=n.OnReview:e.status=n.Accepted),e.fetchSpecialists()});const h={router:m,store:e,statStore:d,applyFilter:_,handlePageChange:t,viewSpecialist:Q,get StatusEnum(){return n},SpecialistPhoto:N};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),G={key:1,class:"q-mt-md text-center"},M={key:2,class:"q-pa-lg flex flex-center"};function X(r,a,m,e,d,_){return o(),u(F,{padding:""},{default:l(()=>[s(x,null,{default:l(()=>[s(P,null,{default:l(()=>a[4]||(a[4]=[i("Специалисты")])),_:1})]),_:1}),s(V,{class:"q-mb-md"},{default:l(()=>[e.statStore.specialistsOnReviewCount>0?(o(),u(f,{key:0,modelValue:e.store.status,"onUpdate:modelValue":[a[0]||(a[0]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.OnReview,label:"На проверке"},null,8,["modelValue","val"])):p("",!0),s(f,{modelValue:e.store.status,"onUpdate:modelValue":[a[1]||(a[1]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Accepted,label:"Проверенные"},null,8,["modelValue","val"]),s(f,{modelValue:e.store.status,"onUpdate:modelValue":[a[2]||(a[2]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Rejected,label:"Отклоненные"},null,8,["modelValue","val"])]),_:1}),e.store.specialists.length>0?(o(),u(b,{key:0},{default:l(()=>[(o(!0),g(A,null,U(e.store.specialists,t=>(o(),u(w,{onClick:Q=>e.viewSpecialist(t),key:t.id,clickable:""},{default:l(()=>[s(v,{avatar:""},{default:l(()=>[s(e.SpecialistPhoto,{specialist:t,size:"4rem",fullscreen:!1,width:64,height:64},null,8,["specialist"])]),_:2},1024),s(v,null,{default:l(()=>[s(y,{class:"text-h6",lines:"1"},{default:l(()=>[i(S(t.lastname)+" "+S(t.firstname),1)]),_:2},1024),s(y,{caption:""},{default:l(()=>[i(S(t.middlename),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(o(),g("div",G,[s(k,null,{default:l(()=>a[5]||(a[5]=[i(" Нет специалистов ")])),_:1})])),e.store.meta.last_page>1?(o(),g("div",M,[e.store.meta?(o(),u(E,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[a[3]||(a[3]=t=>e.store.currentPage=t),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):p("",!0)])):p("",!0),s(C,{showing:e.store.loading},{default:l(()=>[s(B,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const ne=T(z,[["render",X],["__file","IndexPage.vue"]]);export{ne as default};
