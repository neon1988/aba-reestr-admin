import{a as b,Q as V}from"./QToolbar-Dgs45zlN.js";import{c as w,d as S,Q as B}from"./use-transition-BK_bggcp.js";import{Q as n}from"./QInput-CuBXEqnW.js";import{c as U,f as E,h as c,M as F,N as k,r as x,a8 as D,_ as N,Q as m,R as s,S as a,T as l,W as _,V as p,U as v}from"./index-Cv4oVPAd.js";import{Q as P}from"./QCardSection-Ckz6Grn1.js";import{Q as T}from"./QCardActions-4hpNb1jT.js";import{Q as h}from"./QCard-C75FPgnu.js";import{Q as q}from"./QForm-wqqTSnz_.js";import{Q as R,a as I}from"./QInnerLoading-ppFWeswD.js";import{Q as A}from"./QPage-j7VYUl3K.js";import{u as j,U as z,a as g,b as G}from"./UploadFileComponent-DnxAZsjn.js";import"./use-dark-BXHPfObA.js";import"./focus-manager-BJWzFvJg.js";import"./client-C6VKEaho.js";import"./QBadge-C-erP5HS.js";import"./QChip-JDXiz75R.js";import"./format-DyQxkAtJ.js";const L=U({name:"QVideo",props:{...w,src:{type:String,required:!0},title:String,fetchpriority:{type:String,default:"auto"},loading:{type:String,default:"eager"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin"}},setup(i){const r=S(i),u=E(()=>"q-video"+(i.ratio!==void 0?" q-video--responsive":""));return()=>c("div",{class:u.value,style:r.value},[c("iframe",{src:i.src,title:i.title,fetchpriority:i.fetchpriority,loading:i.loading,referrerpolicy:i.referrerpolicy,frameborder:"0",allowfullscreen:!0})])}}),M=F({__name:"CreatePage",setup(i,{expose:r}){r();const u=k(),e=j("post",()=>"/worksheets",{title:"",description:"",cover:void 0,price:"",file:void 0}),d=x(null),f={router:u,form:e,previewFile:d,submit:()=>{e.submit().then(()=>{g("Материал успешно создан","success"),u.push("/worksheets")}).catch(Q=>{const{response:t}=Q;if(t.status===422){const{opts:y}=G(t.data);D.create(y.value)}else g(t.data.message,"negative")})},cancel:()=>{u.push("/worksheets")},UploadFileComponent:z};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}});function O(i,r,u,e,d,C){return m(),s(A,{padding:""},{default:a(()=>[l(V,null,{default:a(()=>[l(b,null,{default:a(()=>r[10]||(r[10]=[_("Создание нового материала")])),_:1})]),_:1}),l(q,{onSubmit:e.submit,valid:e.form.valid},{default:a(()=>[l(h,null,{default:a(()=>[l(P,null,{default:a(()=>[l(e.UploadFileComponent,{modelValue:e.form.cover,"onUpdate:modelValue":r[0]||(r[0]=o=>e.form.cover=o),label:"Выбрать обложку",error:e.form.invalid("cover"),"error-message":e.form.errors.cover,onChange:r[1]||(r[1]=o=>e.form.validate("cover"))},null,8,["modelValue","error","error-message"]),e.form.cover?(m(),s(B,{key:0,src:e.form.cover.url,"spinner-color":"white",class:"q-mb-sm",style:{height:"10rem","max-width":"10rem"}},null,8,["src"])):p("",!0),l(n,{modelValue:e.form.title,"onUpdate:modelValue":r[2]||(r[2]=o=>e.form.title=o),label:"Название материала",error:e.form.invalid("title"),"error-message":e.form.errors.title,onChange:r[3]||(r[3]=o=>e.form.validate("title"))},null,8,["modelValue","error","error-message"]),l(n,{modelValue:e.form.description,"onUpdate:modelValue":r[4]||(r[4]=o=>e.form.description=o),label:"Описание материала",type:"textarea",error:e.form.invalid("description"),"error-message":e.form.errors.description,onChange:r[5]||(r[5]=o=>e.form.validate("description"))},null,8,["modelValue","error","error-message"]),l(n,{modelValue:e.form.price,"onUpdate:modelValue":r[6]||(r[6]=o=>e.form.price=o),label:"Цена",error:e.form.invalid("price"),"error-message":e.form.errors.price,onChange:r[7]||(r[7]=o=>e.form.validate("price"))},null,8,["modelValue","error","error-message"]),l(e.UploadFileComponent,{modelValue:e.form.file,"onUpdate:modelValue":r[8]||(r[8]=o=>e.form.file=o),label:"Выбрать файл",error:e.form.invalid("file"),"error-message":e.form.errors.file,onChange:r[9]||(r[9]=o=>e.form.validate("file"))},null,8,["modelValue","error","error-message"]),e.previewFile?(m(),s(L,{key:1,"spinner-color":"white",src:e.previewFile.url},null,8,["src"])):p("",!0)]),_:1}),l(T,null,{default:a(()=>[l(v,{label:"Создать материал",type:"submit",color:"primary",disabled:e.form.processing},null,8,["disabled"]),l(v,{label:"Отмена",color:"secondary",onClick:e.cancel})]),_:1})]),_:1})]),_:1},8,["valid"]),l(I,{showing:e.form.processing},{default:a(()=>[l(R,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const me=N(M,[["render",O],["__file","CreatePage.vue"]]);export{me as default};
