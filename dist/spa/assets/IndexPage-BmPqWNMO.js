import{a as b,Q}from"./QToolbar-63NGCZOi.js";import{Q as v}from"./QInput-JduuP4zS.js";import{a as S,b as h,Q as d}from"./QItem-BymqpaLI.js";import{Q as c}from"./QBadge-C7jMHzOw.js";import{Q as E}from"./QList-CmW8my4R.js";import{Q as P}from"./QBanner-BMl3DSOV.js";import{Q as x}from"./QPagination-B0JOG3yj.js";import{Q as y,a as k}from"./QInnerLoading--_NxL8nV.js";import{Q as V}from"./QPage-cSry3vdc.js";import{L as B,M as C,N as F,w as L,o as U,_ as w,Q as o,R as u,S as r,T as s,W as i,Y as I,a1 as f,a2 as T,a3 as D,V as n,Z as p}from"./index-BRIAkyOr.js";import{g as q,S as A}from"./SubscriptionLevelEnums-BqLuZYHD.js";import{S as N}from"./StatusEnums-Cpn04w7a.js";import{U as R}from"./UserPhoto-D4ncaBf8.js";import{D as z}from"./DateTime-B3dVrryG.js";import"./use-dark-CT7DvVAR.js";import"./focus-manager-BJWzFvJg.js";import"./format-DyQxkAtJ.js";import"./use-transition-DaJl48lr.js";import"./ImageFullscreen-9km3YxWT.js";import"./QDialog-DPbThiRL.js";import"./date-De9hRpoY.js";const M=B("users",{state:()=>({users:[],meta:{},currentPage:1,loading:!1,status:N.OnReview,search:""}),actions:{async fetchUsers(){this.loading=!0;try{const l=await q(this.search,this.currentPage);this.users=l.data.data,this.meta=l.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}}}}),O=C({__name:"IndexPage",setup(l,{expose:a}){a();const _=F(),e=M(),g=t=>{e.currentPage=t,e.fetchUsers()};L(()=>e.search,()=>{e.fetchUsers()}),U(()=>{e.fetchUsers()});const m={router:_,store:e,handlePageChange:g,UserPhoto:R,get SubscriptionLevelEnums(){return A},DateTime:z};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),j={class:"q-gutter-md q-mb-md q-mx-sm"},G={key:1,class:"q-mt-md text-center"},W={key:2,class:"q-pa-lg flex flex-center"};function Y(l,a,_,e,g,m){return o(),u(V,{padding:""},{default:r(()=>[s(Q,null,{default:r(()=>[s(b,null,{default:r(()=>a[2]||(a[2]=[i("Пользователи")])),_:1})]),_:1}),I("div",j,[s(v,{modelValue:e.store.search,"onUpdate:modelValue":a[0]||(a[0]=t=>e.store.search=t)},null,8,["modelValue"])]),e.store.users.length>0?(o(),u(E,{key:0},{default:r(()=>[(o(!0),f(D,null,T(e.store.users,t=>(o(),u(S,{onClick:Z=>e.router.push({name:"users.edit",params:{id:t.id}}),key:t.id,clickable:""},{default:r(()=>[s(h,{avatar:""},{default:r(()=>[s(e.UserPhoto,{modelValue:t,size:"3rem",width:256,height:256},null,8,["modelValue"])]),_:2},1024),s(h,null,{default:r(()=>[s(d,null,{default:r(()=>[i(p(t.name)+" "+p(t.lastname)+" "+p(t.middlename),1)]),_:2},1024),s(d,null,{default:r(()=>[t.subscription_level==e.SubscriptionLevelEnums.ParentsAndRelated?(o(),u(c,{key:0,label:"Подписка A"})):n("",!0),t.subscription_level==e.SubscriptionLevelEnums.Specialists?(o(),u(c,{key:1,label:"Подписка B"})):n("",!0),t.subscription_level==e.SubscriptionLevelEnums.Centers?(o(),u(c,{key:2,label:"Подписка C"})):n("",!0)]),_:2},1024),t.subscription_level!=e.SubscriptionLevelEnums.Free?(o(),u(d,{key:0},{default:r(()=>[a[3]||(a[3]=i(" Продлена до ")),s(e.DateTime,{"raw-date":t.subscription_ends_at},null,8,["raw-date"])]),_:2},1024)):n("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(o(),f("div",G,[s(P,null,{default:r(()=>a[4]||(a[4]=[i(" Нет пользователей ")])),_:1})])),e.store.meta.last_page>1?(o(),f("div",W,[e.store.meta?(o(),u(x,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[a[1]||(a[1]=t=>e.store.currentPage=t),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):n("",!0)])):n("",!0),s(k,{showing:e.store.loading},{default:r(()=>[s(y,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const ge=w(O,[["render",Y],["__file","IndexPage.vue"]]);export{ge as default};
