import{a as B,Q as y}from"./QToolbar-Bhh1J96v.js";import{Q as c}from"./QRadio-C7db8kPO.js";import{Q as P}from"./QCardSection-o1HUbWa7.js";import{a as b,b as v,Q as S}from"./QItem-mGwmQR2-.js";import{Q as x}from"./QList-DapR1PvD.js";import{Q as w}from"./QBanner-W142u_1a.js";import{Q as k}from"./QPagination-B7j9U7MQ.js";import{Q as E,a as C}from"./QInnerLoading-DVRxtw88.js";import{Q as D}from"./QPage-0zgoenHj.js";import{L as F,M as R,N as U,o as I,_ as L,Q as l,R as u,S as r,T as o,W as p,V as g,a1 as _,a2 as T,a3 as A,Z as Q,Y as O}from"./index-CE79t1yK.js";import{g as N}from"./bulletins-x0Y4FgI7.js";import{S as i}from"./StatusEnums-Cpn04w7a.js";import{u as M}from"./stat-store-6XmzY2hv.js";import{U as q}from"./UserPhoto-DP6Q2yY0.js";import"./use-dark-CY6fCMEH.js";import"./option-sizes-CeH7CM-O.js";import"./QInput-DSqz_9T2.js";import"./focus-manager-BJWzFvJg.js";import"./format-DyQxkAtJ.js";import"./use-transition-BrellFZR.js";import"./ImageFullscreen-DcSekqW8.js";import"./QDialog-CIt2XqB-.js";const j=F("bulletins",{state:()=>({bulletins:[],meta:{},currentPage:1,loading:!1,status:i.OnReview}),actions:{async fetchBulletins(){this.loading=!0;try{const s=await N(this.status,this.currentPage);this.bulletins=s.data.data,this.meta=s.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}}}}),z=R({__name:"IndexPage",setup(s,{expose:a}){a();const m=U(),e=j(),d=M(),h=()=>{e.currentPage=1,e.fetchBulletins()},t=f=>{e.currentPage=f,e.fetchBulletins()},n=f=>{m.push({name:"bulletins.show",params:{id:f.id}})};I(()=>{e.bulletins.length===0&&(d.bulletinsOnReviewCount>0?e.status=i.OnReview:e.status=i.Accepted),e.fetchBulletins()});const V={router:m,store:e,statStore:d,applyFilter:h,handlePageChange:t,viewBulletin:n,get StatusEnum(){return i},UserPhoto:q};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),H=["innerHTML"],G={key:1,class:"q-mt-md text-center"},W={key:2,class:"q-pa-lg flex flex-center"};function Y(s,a,m,e,d,h){return l(),u(D,{padding:""},{default:r(()=>[o(y,null,{default:r(()=>[o(B,null,{default:r(()=>a[4]||(a[4]=[p("Объявления")])),_:1})]),_:1}),o(P,{class:"q-mb-md"},{default:r(()=>[e.statStore.bulletinsOnReviewCount>0?(l(),u(c,{key:0,modelValue:e.store.status,"onUpdate:modelValue":[a[0]||(a[0]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.OnReview,label:"На проверке"},null,8,["modelValue","val"])):g("",!0),o(c,{modelValue:e.store.status,"onUpdate:modelValue":[a[1]||(a[1]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Accepted,label:"Проверенные"},null,8,["modelValue","val"]),o(c,{modelValue:e.store.status,"onUpdate:modelValue":[a[2]||(a[2]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Rejected,label:"Отклоненные"},null,8,["modelValue","val"])]),_:1}),e.store.bulletins.length>0?(l(),u(x,{key:0},{default:r(()=>[(l(!0),_(A,null,T(e.store.bulletins,t=>(l(),u(b,{onClick:n=>e.viewBulletin(t),key:t.id,clickable:""},{default:r(()=>[o(v,{avatar:"",top:""},{default:r(()=>[o(e.UserPhoto,{modelValue:t.creator,"onUpdate:modelValue":n=>t.creator=n,size:"4rem",fullscreen:!1,width:64,height:64},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(v,null,{default:r(()=>[o(S,null,{default:r(()=>[p(Q(t.creator.name)+" "+Q(t.creator.lastname)+" "+Q(t.creator.middlename),1)]),_:2},1024),o(S,null,{default:r(()=>[O("span",{innerHTML:t.text.replace(/\n/g,"<br>")},null,8,H)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(l(),_("div",G,[o(w,null,{default:r(()=>a[5]||(a[5]=[p(" Нет объявлений ")])),_:1})])),e.store.meta.last_page>1?(l(),_("div",W,[e.store.meta?(l(),u(k,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[a[3]||(a[3]=t=>e.store.currentPage=t),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):g("",!0)])):g("",!0),o(C,{showing:e.store.loading},{default:r(()=>[o(E,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const Qe=L(z,[["render",Y],["__file","IndexPage.vue"]]);export{Qe as default};
