import{a as b,Q}from"./QToolbar-Bhh1J96v.js";import{Q as v}from"./QInput-DSqz_9T2.js";import{a as S,b as h,Q as d}from"./QItem-mGwmQR2-.js";import{Q as c}from"./QBadge-BdZVIe1J.js";import{Q as P}from"./QList-DapR1PvD.js";import{Q as x}from"./QBanner-W142u_1a.js";import{Q as y}from"./QPagination-B7j9U7MQ.js";import{Q as k,a as B}from"./QInnerLoading-DVRxtw88.js";import{Q as E}from"./QPage-0zgoenHj.js";import{L as V,M as C,N as L,w as U,o as w,_ as D,Q as u,R as o,S as r,T as s,W as i,Y as I,a1 as f,a2 as T,a3 as F,V as n,Z as p}from"./index-CE79t1yK.js";import{g as q,S as N}from"./SubscriptionLevelEnums-2hsxeXkm.js";import{S as R}from"./StatusEnums-Cpn04w7a.js";import{U as z}from"./UserPhoto-DP6Q2yY0.js";import{D as A}from"./DateTime-Bog1G5xt.js";import"./use-dark-CY6fCMEH.js";import"./focus-manager-BJWzFvJg.js";import"./format-DyQxkAtJ.js";import"./use-transition-BrellFZR.js";import"./ImageFullscreen-DcSekqW8.js";import"./QDialog-CIt2XqB-.js";const M=V("users",{state:()=>({users:[],meta:{},currentPage:1,loading:!1,status:R.OnReview,search:""}),actions:{async fetchUsers(){this.loading=!0;try{const l=await q(this.search,this.currentPage);this.users=l.data.data,this.meta=l.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}}}}),O=C({__name:"IndexPage",setup(l,{expose:a}){a();const _=L(),e=M(),g=t=>{e.currentPage=t,e.fetchUsers()};U(()=>e.search,()=>{e.fetchUsers()}),w(()=>{e.fetchUsers()});const m={router:_,store:e,handlePageChange:g,UserPhoto:z,get SubscriptionLevelEnums(){return N},DateTime:A};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),j={class:"q-gutter-md q-mb-md q-mx-sm"},G={key:1,class:"q-mt-md text-center"},W={key:2,class:"q-pa-lg flex flex-center"};function Y(l,a,_,e,g,m){return u(),o(E,{padding:""},{default:r(()=>[s(Q,null,{default:r(()=>[s(b,null,{default:r(()=>a[2]||(a[2]=[i("Пользователи")])),_:1})]),_:1}),I("div",j,[s(v,{modelValue:e.store.search,"onUpdate:modelValue":a[0]||(a[0]=t=>e.store.search=t)},null,8,["modelValue"])]),e.store.users.length>0?(u(),o(P,{key:0},{default:r(()=>[(u(!0),f(F,null,T(e.store.users,t=>(u(),o(S,{onClick:Z=>e.router.push({name:"users.edit",params:{id:t.id}}),key:t.id,clickable:""},{default:r(()=>[s(h,{avatar:""},{default:r(()=>[s(e.UserPhoto,{modelValue:t,size:"3rem",width:48,height:48},null,8,["modelValue"])]),_:2},1024),s(h,null,{default:r(()=>[s(d,null,{default:r(()=>[i(p(t.name)+" "+p(t.lastname)+" "+p(t.middlename),1)]),_:2},1024),s(d,null,{default:r(()=>[t.subscription_level==e.SubscriptionLevelEnums.ParentsAndRelated?(u(),o(c,{key:0,label:"Родители и смежники"})):n("",!0),t.subscription_level==e.SubscriptionLevelEnums.Specialists?(u(),o(c,{key:1,label:"Специалисты"})):n("",!0),t.subscription_level==e.SubscriptionLevelEnums.Centers?(u(),o(c,{key:2,label:"Центры"})):n("",!0)]),_:2},1024),t.subscription_level!=e.SubscriptionLevelEnums.Free?(u(),o(d,{key:0},{default:r(()=>[a[3]||(a[3]=i(" Продлена до ")),s(e.DateTime,{"raw-date":t.subscription_ends_at},null,8,["raw-date"])]),_:2},1024)):n("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(u(),f("div",G,[s(x,null,{default:r(()=>a[4]||(a[4]=[i(" Нет пользователей ")])),_:1})])),e.store.meta.last_page>1?(u(),f("div",W,[e.store.meta?(u(),o(y,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[a[1]||(a[1]=t=>e.store.currentPage=t),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):n("",!0)])):n("",!0),s(B,{showing:e.store.loading},{default:r(()=>[s(k,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const _e=D(O,[["render",Y],["__file","IndexPage.vue"]]);export{_e as default};
