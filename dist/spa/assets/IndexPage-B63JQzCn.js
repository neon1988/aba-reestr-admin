import{a as P,Q as x}from"./QToolbar-CqsNtWoR.js";import{Q as p}from"./QRadio-B9AU-n6L.js";import{Q as V}from"./QCardSection-BAxKoMXM.js";import{a as b,b as v,Q as y}from"./QItem-BG1eVVsD.js";import{Q as k}from"./QList-CIoNG3E9.js";import{Q as w}from"./QBanner-KqTNsfqC.js";import{Q as E}from"./QPagination-BiHj3R9m.js";import{Q as B,a as C}from"./QInnerLoading-BJlBIsYX.js";import{Q as F}from"./QPage-SnA9jhU2.js";import{L as R,M as D,N as I,o as O,_ as L,Q as r,R as u,S as o,T as s,W as i,V as f,a1 as g,a2 as T,a3 as A,Z as S}from"./index-Uar3rvXj.js";import{g as N}from"./specialists-B0RM8lsN.js";import{S as n}from"./StatusEnums-Cpn04w7a.js";import{S as U}from"./SpecialistPhoto-Dwx0ImUG.js";import{u as q}from"./stat-store-BfqwQI1J.js";import"./use-dark-BJRxIyn1.js";import"./option-sizes-Bpm7nUBJ.js";import"./QInput-BpJn7DHK.js";import"./focus-manager-BJWzFvJg.js";import"./format-DyQxkAtJ.js";import"./use-transition-C4qDLXDO.js";import"./ImageFullscreen-8C9Y7j26.js";import"./QDialog-CSjj4JpU.js";const j=R("specialists",{state:()=>({specialists:[],meta:{},currentPage:1,loading:!1,status:n.OnReview}),actions:{async fetchSpecialists(){this.loading=!0;try{const l=await N(this.status,this.currentPage);this.specialists=l.data.data,this.meta=l.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}}}}),z=D({__name:"IndexPage",setup(l,{expose:a}){a();const m=I(),e=j(),d=q(),_=()=>{e.currentPage=1,e.fetchSpecialists()},t=c=>{e.currentPage=c,e.fetchSpecialists()},Q=c=>{m.push({name:"specialists.edit",params:{id:c.id}})};O(()=>{e.specialists.length===0&&(d.specialistsOnReviewCount>0?e.status=n.OnReview:e.status=n.Accepted),e.fetchSpecialists()});const h={router:m,store:e,statStore:d,applyFilter:_,handlePageChange:t,viewSpecialist:Q,get StatusEnum(){return n},SpecialistPhoto:U};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),M={key:1,class:"q-mt-md text-center"},G={key:2,class:"q-pa-lg flex flex-center"};function W(l,a,m,e,d,_){return r(),u(F,{padding:""},{default:o(()=>[s(x,null,{default:o(()=>[s(P,null,{default:o(()=>a[4]||(a[4]=[i("Специалисты")])),_:1})]),_:1}),s(V,{class:"q-mb-md"},{default:o(()=>[e.statStore.specialistsOnReviewCount>0?(r(),u(p,{key:0,modelValue:e.store.status,"onUpdate:modelValue":[a[0]||(a[0]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.OnReview,label:"На проверке"},null,8,["modelValue","val"])):f("",!0),s(p,{modelValue:e.store.status,"onUpdate:modelValue":[a[1]||(a[1]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Accepted,label:"Проверенные"},null,8,["modelValue","val"]),s(p,{modelValue:e.store.status,"onUpdate:modelValue":[a[2]||(a[2]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Rejected,label:"Отклоненные"},null,8,["modelValue","val"])]),_:1}),e.store.specialists.length>0?(r(),u(k,{key:0},{default:o(()=>[(r(!0),g(A,null,T(e.store.specialists,t=>(r(),u(b,{onClick:Q=>e.viewSpecialist(t),key:t.id,clickable:""},{default:o(()=>[s(v,{avatar:""},{default:o(()=>[s(e.SpecialistPhoto,{specialist:t,size:"4rem",fullscreen:!1,width:128,height:128},null,8,["specialist"])]),_:2},1024),s(v,null,{default:o(()=>[s(y,{class:"text-h6",lines:"1"},{default:o(()=>[i(S(t.name)+" "+S(t.lastname),1)]),_:2},1024),s(y,{caption:""},{default:o(()=>[i(S(t.middlename),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(r(),g("div",M,[s(w,null,{default:o(()=>a[5]||(a[5]=[i(" Нет специалистов ")])),_:1})])),e.store.meta.last_page>1?(r(),g("div",G,[e.store.meta?(r(),u(E,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[a[3]||(a[3]=t=>e.store.currentPage=t),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):f("",!0)])):f("",!0),s(C,{showing:e.store.loading},{default:o(()=>[s(B,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const ge=L(z,[["render",W],["__file","IndexPage.vue"]]);export{ge as default};
