import{a as x,Q as v}from"./QToolbar-fsbRQWuM.js";import{L as k,M as F,N as E,r as V,o as b,_ as w,Q as o,R as s,S as n,T as r,W as i,U as D,a1 as g,a2 as I,a3 as U,V as m,Z as S}from"./index-Bc0R355J.js";import{Q as C}from"./QCardSection-CMAUuuie.js";import{Q}from"./QRadio-D7sHEEan.js";import{a as T,b as y,Q as p}from"./QItem-BlZjPOp4.js";import{Q as B}from"./QList-BbXI1HLq.js";import{Q as L}from"./QBanner-B7nCSk7H.js";import{Q as N}from"./QPagination-DohMD0sg.js";import{Q as q,a as R}from"./QInnerLoading-BHVqACUk.js";import{Q as M}from"./QPage-SQbvXMJf.js";import{g as j,a as z}from"./conferences-C1t8kUZL.js";import{D as A}from"./DateTime-DAWuHm1q.js";import{I as G}from"./ImageComponent-m-e6C0wA.js";import"./use-dark-B6AwncSa.js";import"./option-sizes-BHbE_qxZ.js";import"./QInput-KLQz9GaB.js";import"./focus-manager-zjdVGI5d.js";import"./format-DyQxkAtJ.js";import"./ImageFullscreen-BMuWzocu.js";import"./date-BaulYPxB.js";const O=k("conferences",{state:()=>({conferences:[],meta:{},currentPage:1,loading:!1}),actions:{async fetchUpcomingConferences(){this.loading=!0;try{const u=await j(this.currentPage);this.conferences=u.data.data,this.meta=u.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}},async fetchEndedConferences(){this.loading=!0;try{const u=await z(this.currentPage);this.conferences=u.data.data,this.meta=u.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}},setPage(u){this.currentPage=u}}}),W=F({__name:"IndexPage",setup(u,{expose:a}){a();const c=E(),e=O(),d=V("Upcoming"),l=()=>{d.value==="Upcoming"?e.fetchUpcomingConferences():d.value==="Ended"&&e.fetchEndedConferences()},t=()=>{e.currentPage=1,l()},_=f=>{e.currentPage=f,l()},P=f=>{c.push({name:"conferences.edit",params:{id:f.id}})};b(()=>{l()});const h={router:c,store:e,status:d,fetchConferences:l,applyFilter:t,handlePageChange:_,viewConference:P,DateTime:A,ImageComponent:G};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),Z={key:1,class:"q-mt-md text-center"},H={key:2,class:"q-pa-lg flex flex-center"};function J(u,a,c,e,d,l){return o(),s(M,{padding:""},{default:n(()=>[r(v,null,{default:n(()=>[r(x,null,{default:n(()=>a[3]||(a[3]=[i("Мероприятия")])),_:1})]),_:1}),r(C,null,{default:n(()=>[r(D,{label:"Создать мероприятие",color:"green",to:{name:"conferences.create"}})]),_:1}),r(C,null,{default:n(()=>[r(Q,{modelValue:e.status,"onUpdate:modelValue":[a[0]||(a[0]=t=>e.status=t),e.applyFilter],val:"Upcoming",label:"Предстоящие"},null,8,["modelValue"]),r(Q,{modelValue:e.status,"onUpdate:modelValue":[a[1]||(a[1]=t=>e.status=t),e.applyFilter],val:"Ended",label:"Завершенные"},null,8,["modelValue"])]),_:1}),e.store.conferences.length>0?(o(),s(B,{key:0},{default:n(()=>[(o(!0),g(U,null,I(e.store.conferences,t=>(o(),s(T,{onClick:_=>e.viewConference(t),key:t.id,clickable:""},{default:n(()=>[r(y,{avatar:""},{default:n(()=>[t.cover?(o(),s(e.ImageComponent,{key:0,url:t.cover.url,alt:"cover","max-width":50,"max-height":50,"quasar-component":""},null,8,["url"])):m("",!0)]),_:2},1024),r(y,null,{default:n(()=>[r(p,{class:"text-h6",lines:"1"},{default:n(()=>[i(S(t.title),1)]),_:2},1024),t.start_at?(o(),s(p,{key:0,caption:""},{default:n(()=>[a[4]||(a[4]=i(" Дата начала: ")),r(e.DateTime,{"raw-date":t.start_at},null,8,["raw-date"])]),_:2},1024)):m("",!0),t.end_at?(o(),s(p,{key:1,caption:""},{default:n(()=>[a[5]||(a[5]=i(" Дата окончания: ")),r(e.DateTime,{"raw-date":t.end_at},null,8,["raw-date"])]),_:2},1024)):m("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(o(),g("div",Z,[r(L,null,{default:n(()=>a[6]||(a[6]=[i(" Нет мероприятий ")])),_:1})])),e.store.meta.last_page>1?(o(),g("div",H,[e.store.meta?(o(),s(N,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[a[2]||(a[2]=t=>e.store.currentPage=t),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):m("",!0)])):m("",!0),r(R,{showing:e.store.loading},{default:n(()=>[r(q,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const _e=w(W,[["render",J],["__file","IndexPage.vue"]]);export{_e as default};
