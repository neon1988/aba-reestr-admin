import{b as oe,aj as ae,w as W,ak as $e,o as We,g as le,e as Z,al as Ae,am as ue,s as h,l as g,B as Ie,an as Ke,G as Qe,ao as je,ap as R,c as ye,r as B,M as Re,aq as Ue,h as x,ar as Xe,as as Ye,at as Ne,a8 as Ge,k as y,a9 as ce,E as Je,aa as Ze,O as et,_ as tt,S as ot,T as lt,U as nt,$ as U,au as X,av as it,V as st,W as rt}from"./index-B5fKhRmK.js";import{a as at,u as ut,b as ct}from"./use-transition-4mtm_1Sm.js";import{r as de,b as dt,a as ft}from"./focus-manager-BJWzFvJg.js";function mt(e,t,o){let l;function i(){l!==void 0&&(ae.remove(l),l=void 0)}return oe(()=>{e.value===!0&&i()}),{removeFromHistory:i,addToHistory(){l={condition:()=>o.value===!0,handler:t},ae.add(l)}}}const vt={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},pt=["beforeShow","show","beforeHide","hide"];function wt({showing:e,canShow:t,hideOnRouteChange:o,handleShow:l,handleHide:i,processOnMount:a}){const n=le(),{props:r,emit:c,proxy:m}=n;let f;function v(u){e.value===!0?E(u):p(u)}function p(u){if(r.disable===!0||u!==void 0&&u.qAnchorHandled===!0||t!==void 0&&t(u)!==!0)return;const w=r["onUpdate:modelValue"]!==void 0;w===!0&&(c("update:modelValue",!0),f=u,Z(()=>{f===u&&(f=void 0)})),(r.modelValue===null||w===!1)&&q(u)}function q(u){e.value!==!0&&(e.value=!0,c("beforeShow",u),l!==void 0?l(u):c("show",u))}function E(u){if(r.disable===!0)return;const w=r["onUpdate:modelValue"]!==void 0;w===!0&&(c("update:modelValue",!1),f=u,Z(()=>{f===u&&(f=void 0)})),(r.modelValue===null||w===!1)&&V(u)}function V(u){e.value!==!1&&(e.value=!1,c("beforeHide",u),i!==void 0?i(u):c("hide",u))}function P(u){r.disable===!0&&u===!0?r["onUpdate:modelValue"]!==void 0&&c("update:modelValue",!1):u===!0!==e.value&&(u===!0?q:V)(f)}W(()=>r.modelValue,P),o!==void 0&&$e(n)===!0&&W(()=>m.$route.fullPath,()=>{o.value===!0&&e.value===!0&&E()}),a===!0&&We(()=>{P(r.modelValue)});const H={show:p,hide:E,toggle:v};return Object.assign(m,H),H}const At=[Element,String],ht=[null,document,document.body,document.scrollingElement,document.documentElement];function It(e,t){let o=Ae(t);if(o===void 0){if(e==null)return window;o=e.closest(".scroll,.scroll-y,.overflow-auto")}return ht.includes(o)?window:o}function xe(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function Te(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}function ke(e,t,o=0){const l=arguments[3]===void 0?performance.now():arguments[3],i=xe(e);if(o<=0){i!==t&&ee(e,t);return}requestAnimationFrame(a=>{const n=a-l,r=i+(t-i)/Math.max(n,o)*n;ee(e,r),r!==t&&ke(e,t,o-n,a)})}function Ee(e,t,o=0){const l=arguments[3]===void 0?performance.now():arguments[3],i=Te(e);if(o<=0){i!==t&&te(e,t);return}requestAnimationFrame(a=>{const n=a-l,r=i+(t-i)/Math.max(n,o)*n;te(e,r),r!==t&&Ee(e,t,o-n,a)})}function ee(e,t){if(e===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t);return}e.scrollTop=t}function te(e,t){if(e===window){window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}e.scrollLeft=t}function Kt(e,t,o){if(o){ke(e,t,o);return}ee(e,t)}function Qt(e,t,o){if(o){Ee(e,t,o);return}te(e,t)}let O;function jt(){if(O!==void 0)return O;const e=document.createElement("p"),t=document.createElement("div");ue(e,{width:"100%",height:"200px"}),ue(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const o=e.offsetWidth;t.style.overflow="scroll";let l=e.offsetWidth;return o===l&&(l=t.clientWidth),t.remove(),O=o-l,O}function gt(e,t=!0){return!e||e.nodeType!==Node.ELEMENT_NODE?!1:t?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"]))}let C=0,Y,N,F,G=!1,fe,me,ve,b=null;function bt(e){yt(e)&&Ie(e)}function yt(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=Ke(e),o=e.shiftKey&&!e.deltaX,l=!o&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),i=o||l?e.deltaY:e.deltaX;for(let a=0;a<t.length;a++){const n=t[a];if(gt(n,l))return l?i<0&&n.scrollTop===0?!0:i>0&&n.scrollTop+n.clientHeight===n.scrollHeight:i<0&&n.scrollLeft===0?!0:i>0&&n.scrollLeft+n.clientWidth===n.scrollWidth}return!0}function pe(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function D(e){G!==!0&&(G=!0,requestAnimationFrame(()=>{G=!1;const{height:t}=e.target,{clientHeight:o,scrollTop:l}=document.scrollingElement;(F===void 0||t!==window.innerHeight)&&(F=o-t,document.scrollingElement.scrollTop=l),l>F&&(document.scrollingElement.scrollTop-=Math.ceil((l-F)/8))}))}function we(e){const t=document.body,o=window.visualViewport!==void 0;if(e==="add"){const{overflowY:l,overflowX:i}=window.getComputedStyle(t);Y=Te(window),N=xe(window),fe=t.style.left,me=t.style.top,ve=window.location.href,t.style.left=`-${Y}px`,t.style.top=`-${N}px`,i!=="hidden"&&(i==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),l!=="hidden"&&(l==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,h.is.ios===!0&&(o===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",D,g.passiveCapture),window.visualViewport.addEventListener("scroll",D,g.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",pe,g.passiveCapture))}h.is.desktop===!0&&h.is.mac===!0&&window[`${e}EventListener`]("wheel",bt,g.notPassive),e==="remove"&&(h.is.ios===!0&&(o===!0?(window.visualViewport.removeEventListener("resize",D,g.passiveCapture),window.visualViewport.removeEventListener("scroll",D,g.passiveCapture)):window.removeEventListener("scroll",pe,g.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=fe,t.style.top=me,window.location.href===ve&&window.scrollTo(Y,N),F=void 0)}function xt(e){let t="add";if(e===!0){if(C++,b!==null){clearTimeout(b),b=null;return}if(C>1)return}else{if(C===0||(C--,C>0))return;if(t="remove",h.is.ios===!0&&h.is.nativeMobile===!0){b!==null&&clearTimeout(b),b=setTimeout(()=>{we(t),b=null},100);return}}we(t)}function Tt(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,xt(t))}}}function kt(){let e;const t=le();function o(){e=void 0}return Qe(o),oe(o),{removeTick:o,registerTick(l){e=l,Z(()=>{e===l&&(je(t)===!1&&e(),e=void 0)})}}}const J=[];function Rt(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return R(e)}else if(e.__qPortal===!0){const o=R(e);return o!==void 0&&o.$options.name==="QPopupProxy"?(e.hide(t),o):e}e=R(e)}while(e!=null)}const Et=ye({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function St(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function _t(e,t,o,l){const i=B(!1),a=B(!1);let n=null;const r={},c=l==="dialog"&&St(e);function m(v){if(v===!0){de(r),a.value=!0;return}a.value=!1,i.value===!1&&(c===!1&&n===null&&(n=Ye(!1,l)),i.value=!0,J.push(e.proxy),dt(r))}function f(v){if(a.value=!1,v!==!0)return;de(r),i.value=!1;const p=J.indexOf(e.proxy);p!==-1&&J.splice(p,1),n!==null&&(Ne(n),n=null)}return Re(()=>{f(!0)}),e.proxy.__qPortal=!0,Ue(e.proxy,"contentEl",()=>t.value),{showPortal:m,hidePortal:f,portalIsActive:i,portalIsAccessible:a,renderPortal:()=>c===!0?o():i.value===!0?[x(Xe,{to:n},x(Et,o))]:void 0}}const T=[];let _;function qt(e){_=e.keyCode===27}function Pt(){_===!0&&(_=!1)}function Lt(e){_===!0&&(_=!1,Ge(e,27)===!0&&T[T.length-1](e))}function Se(e){window[e]("keydown",qt),window[e]("blur",Pt),window[e]("keyup",Lt),_=!1}function Ct(e){h.is.desktop===!0&&(T.push(e),T.length===1&&Se("addEventListener"))}function he(e){const t=T.indexOf(e);t!==-1&&(T.splice(t,1),T.length===0&&Se("removeEventListener"))}const k=[];function _e(e){k[k.length-1](e)}function Ft(e){h.is.desktop===!0&&(k.push(e),k.length===1&&document.body.addEventListener("focusin",_e))}function ge(e){const t=k.indexOf(e);t!==-1&&(k.splice(t,1),k.length===0&&document.body.removeEventListener("focusin",_e))}let $=0;const Bt={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},be={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},Vt=ye({name:"QDialog",inheritAttrs:!1,props:{...vt,...at,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...pt,"shake","click","escapeKey"],setup(e,{slots:t,emit:o,attrs:l}){const i=le(),a=B(null),n=B(!1),r=B(!1);let c=null,m=null,f,v;const p=y(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:q}=Tt(),{registerTimeout:E}=ut(),{registerTick:V,removeTick:P}=kt(),{transitionProps:H,transitionStyle:u}=ct(e,()=>be[e.position][0],()=>be[e.position][1]),w=y(()=>u.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:ne,hidePortal:ie,portalIsAccessible:qe,renderPortal:Pe}=_t(i,a,De,"dialog"),{hide:M}=wt({showing:n,hideOnRouteChange:p,handleShow:He,handleHide:Me,processOnMount:!0}),{addToHistory:Le,removeFromHistory:Ce}=mt(n,M,p),Fe=y(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Bt[e.position]}`+(r.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),z=y(()=>n.value===!0&&e.seamless!==!0),Be=y(()=>e.autoClose===!0?{onClick:ze}:{}),Ve=y(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${z.value===!0?"modal":"seamless"}`,l.class]);W(()=>e.maximized,s=>{n.value===!0&&K(s)}),W(z,s=>{q(s),s===!0?(Ft(Q),Ct(I)):(ge(Q),he(I))});function He(s){Le(),m=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,K(e.maximized),ne(),r.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),V(L)):P(),E(()=>{if(i.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:d,bottom:S}=document.activeElement.getBoundingClientRect(),{innerHeight:re}=window,j=window.visualViewport!==void 0?window.visualViewport.height:re;d>0&&S>j/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-j,S>=re?1/0:Math.ceil(document.scrollingElement.scrollTop+S-j/2))),document.activeElement.scrollIntoView()}v=!0,a.value.click(),v=!1}ne(!0),r.value=!1,o("show",s)},e.transitionDuration)}function Me(s){P(),Ce(),se(!0),r.value=!0,ie(),m!==null&&(((s&&s.type.indexOf("key")===0?m.closest('[tabindex]:not([tabindex^="-"])'):void 0)||m).focus(),m=null),E(()=>{ie(!0),r.value=!1,o("hide",s)},e.transitionDuration)}function L(s){ft(()=>{let d=a.value;if(d!==null){if(s!==void 0){const S=d.querySelector(s);if(S!==null){S.focus({preventScroll:!0});return}}d.contains(document.activeElement)!==!0&&(d=d.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||d.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||d.querySelector("[autofocus], [data-autofocus]")||d,d.focus({preventScroll:!0}))}})}function A(s){s&&typeof s.focus=="function"?s.focus({preventScroll:!0}):L(),o("shake");const d=a.value;d!==null&&(d.classList.remove("q-animate--scale"),d.classList.add("q-animate--scale"),c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,a.value!==null&&(d.classList.remove("q-animate--scale"),L())},170))}function I(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&A():(o("escapeKey"),M()))}function se(s){c!==null&&(clearTimeout(c),c=null),(s===!0||n.value===!0)&&(K(!1),e.seamless!==!0&&(q(!1),ge(Q),he(I))),s!==!0&&(m=null)}function K(s){s===!0?f!==!0&&($<1&&document.body.classList.add("q-body--dialog"),$++,f=!0):f===!0&&($<2&&document.body.classList.remove("q-body--dialog"),$--,f=!1)}function ze(s){v!==!0&&(M(s),o("click",s))}function Oe(s){e.persistent!==!0&&e.noBackdropDismiss!==!0?M(s):e.noShake!==!0&&A()}function Q(s){e.allowFocusOutside!==!0&&qe.value===!0&&Ze(a.value,s.target)!==!0&&L('[tabindex]:not([tabindex="-1"])')}Object.assign(i.proxy,{focus:L,shake:A,__updateRefocusTarget(s){m=s||null}}),oe(se);function De(){return x("div",{role:"dialog","aria-modal":z.value===!0?"true":"false",...l,class:Ve.value},[x(ce,{name:"q-transition--fade",appear:!0},()=>z.value===!0?x("div",{class:"q-dialog__backdrop fixed-full",style:w.value,"aria-hidden":"true",tabindex:-1,onClick:Oe}):null),x(ce,H.value,()=>n.value===!0?x("div",{ref:a,class:Fe.value,style:u.value,tabindex:-1,...Be.value},Je(t.default)):null)])}return Pe}}),Ht=et({__name:"ImageFullscreen",props:{show:{type:Boolean,required:!0}},emits:["update:show"],setup(e,{expose:t,emit:o}){t();const l=e,i=y(()=>l.show),a=o;function n(){a("update:show",!1)}const r={props:l,show:i,emit:a,closeFullscreen:n};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),Mt={class:"q-pa-lg absolute-top-right"},zt={class:"q-pa-lg absolute-bottom-right"};function Ot(e,t,o,l,i,a){return ot(),lt(Vt,{modelValue:l.show,"onUpdate:modelValue":t[0]||(t[0]=n=>l.show=n),maximized:"","full-width":"","full-height":"",onKeydown:it(l.closeFullscreen,["esc"])},{default:nt(()=>[U("div",{class:"fullscreen",style:{width:"100%",height:"100%",position:"relative"},onClick:l.closeFullscreen},[X(e.$slots,"default"),X(e.$slots,"top-right",{},()=>[U("div",Mt,[st(rt,{icon:"close",color:"white",round:"","text-color":"black",onClick:l.closeFullscreen})])]),U("div",zt,[X(e.$slots,"right-bottom")])])]),_:3},8,["modelValue"])}const Ut=tt(Ht,[["render",Ot],["__file","ImageFullscreen.vue"]]);export{Ut as I,Vt as Q,pt as a,wt as b,mt as c,Tt as d,xe as e,Te as f,It as g,Kt as h,Qt as i,jt as j,kt as k,_t as l,Ft as m,he as n,Rt as o,J as p,Ct as q,ge as r,At as s,vt as u};
