import{I as w,m as v}from"./ImageFullscreen-C9jQqfIY.js";import{N as U,r as h,k as u,_ as C,S as n,T as d,U as f,a8 as b,a4 as p,a0 as P,V as S,X as k}from"./index-BWeAa12D.js";const x=U({__name:"UserPhoto",props:{user:{type:Object,required:!0},size:{type:String,default:"3rem"},fullscreen:{type:Boolean,default:!1},width:{type:Number||null,default:null},height:{type:Number||null,default:null},quality:{type:Number||null,default:null}},setup(i,{expose:a}){a();const e=i,r=h(!1),s=h(e.user.photo?.url||null),c=u(()=>e.user.name?e.user.name.split(" ").slice(0,2).map(o=>o.charAt(0).toUpperCase()).join(""):"U"),l=u(()=>{const t=["blue","green","red","purple","orange","teal"],o=Array.from(e.user.name||"U").reduce((g,y)=>g+y.charCodeAt(0),0);return t[o%t.length]}),_=u(()=>{if(!s.value)return"";try{const t=new URL(s.value);return e.width&&t.searchParams.set("w",e.width.toString()),e.height&&t.searchParams.set("h",e.height.toString()),e.quality&&t.searchParams.set("q",e.quality.toString()),t.toString()}catch{}return s.value}),m={props:e,showFullscreen:r,url:s,initials:c,avatarColor:l,computedImageUrl:_,ImageFullscreen:w};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),F=["src","alt"],I={key:1};function B(i,a,e,r,s,c){return n(),d(b,{size:e.size,color:r.avatarColor,"text-color":"white",onClick:a[1]||(a[1]=l=>r.url&&(r.showFullscreen=!0))},{default:f(()=>[r.url?(n(),p("img",{key:0,src:r.computedImageUrl,alt:`${e.user.name||"Пользователь"}'s avatar`,class:"avatar-image"},null,8,F)):(n(),p("span",I,P(r.initials),1)),e.fullscreen&&r.url?(n(),d(r.ImageFullscreen,{key:2,show:r.showFullscreen,"onUpdate:show":a[0]||(a[0]=l=>r.showFullscreen=l)},{default:f(()=>[S(v,{src:r.url,"spinner-color":"primary","spinner-size":"82px",width:"100%",height:"100%",fit:"scale-down"},null,8,["src"])]),_:1},8,["show"])):k("",!0)]),_:1},8,["size","color"])}const z=C(x,[["render",B],["__scopeId","data-v-8874f3cb"],["__file","UserPhoto.vue"]]);export{z as U};
