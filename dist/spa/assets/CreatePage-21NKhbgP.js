import{a as Q,Q as y}from"./QToolbar-BjnzGdn8.js";import{a as w,b as B,Q as S}from"./use-transition-By_GSWr4.js";import{Q as n}from"./QInput-CHFEuogG.js";import{c as U,f as E,h as p,M as F,N as k,r as x,a8 as T,_ as D,Q as m,R as s,S as a,T as l,W as N,V as c,U as g}from"./index-3CeRA5gR.js";import{Q as P}from"./QCardSection-Cap8E1vc.js";import{Q as I}from"./QCardActions-BcY71p0D.js";import{Q as _}from"./QCard-qYkn4Jno.js";import{Q as q}from"./QForm-DAcesatI.js";import{Q as R,a as h}from"./QInnerLoading-Dvj6N35R.js";import{Q as A}from"./QPage-Cs4qjIpF.js";import{u as j,U as z,a as v,b as G}from"./UploadFileComponent-fM9EEaBG.js";import{T as L}from"./TagInput-CN64h4MQ.js";import"./use-dark-Dg6r_JxN.js";import"./focus-manager-BJWzFvJg.js";import"./client-CXDUerZn.js";import"./QBadge-3df61wyN.js";import"./QChip-DqwOLBB-.js";import"./format-DyQxkAtJ.js";import"./QItem-Bgl7Ytt_.js";import"./QSelect-CdwXK2LL.js";import"./selection-DobkwH9W.js";import"./QDialog-tWG2j4rv.js";const M=U({name:"QVideo",props:{...w,src:{type:String,required:!0},title:String,fetchpriority:{type:String,default:"auto"},loading:{type:String,default:"eager"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin"}},setup(u){const e=B(u),i=E(()=>"q-video"+(u.ratio!==void 0?" q-video--responsive":""));return()=>p("div",{class:i.value,style:e.value},[p("iframe",{src:u.src,title:u.title,fetchpriority:u.fetchpriority,loading:u.loading,referrerpolicy:u.referrerpolicy,frameborder:"0",allowfullscreen:!0})])}}),O=F({__name:"CreatePage",setup(u,{expose:e}){e();const i=k(),r=j("post",()=>"/worksheets",{title:"",description:"",cover:void 0,price:"",file:void 0,tags:[]}),d=x(null),f={router:i,form:r,previewFile:d,submit:()=>{r.submit().then(()=>{v("Материал успешно создан","success"),i.push("/worksheets")}).catch(V=>{const{response:t}=V;if(t.status===422){const{opts:b}=G(t.data);T.create(b.value)}else v(t.data.message,"negative")})},cancel:()=>{i.push("/worksheets")},UploadFileComponent:z,TagInput:L};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}});function W(u,e,i,r,d,C){return m(),s(A,{padding:""},{default:a(()=>[l(y,null,{default:a(()=>[l(Q,null,{default:a(()=>e[11]||(e[11]=[N("Создание нового материала")])),_:1})]),_:1}),l(q,{onSubmit:r.submit,valid:r.form.valid},{default:a(()=>[l(_,null,{default:a(()=>[l(P,null,{default:a(()=>[l(r.UploadFileComponent,{modelValue:r.form.cover,"onUpdate:modelValue":e[0]||(e[0]=o=>r.form.cover=o),label:"Выбрать обложку",error:r.form.invalid("cover"),"error-message":r.form.errors.cover,onChange:e[1]||(e[1]=o=>r.form.validate("cover"))},null,8,["modelValue","error","error-message"]),r.form.cover?(m(),s(S,{key:0,src:r.form.cover.url,"spinner-color":"white",class:"q-mb-sm",style:{height:"10rem","max-width":"10rem"}},null,8,["src"])):c("",!0),l(n,{modelValue:r.form.title,"onUpdate:modelValue":e[2]||(e[2]=o=>r.form.title=o),label:"Название материала",error:r.form.invalid("title"),"error-message":r.form.errors.title,onChange:e[3]||(e[3]=o=>r.form.validate("title"))},null,8,["modelValue","error","error-message"]),l(n,{modelValue:r.form.description,"onUpdate:modelValue":e[4]||(e[4]=o=>r.form.description=o),label:"Описание материала",type:"textarea",error:r.form.invalid("description"),"error-message":r.form.errors.description,onChange:e[5]||(e[5]=o=>r.form.validate("description"))},null,8,["modelValue","error","error-message"]),l(n,{modelValue:r.form.price,"onUpdate:modelValue":e[6]||(e[6]=o=>r.form.price=o),label:"Цена",error:r.form.invalid("price"),"error-message":r.form.errors.price,onChange:e[7]||(e[7]=o=>r.form.validate("price"))},null,8,["modelValue","error","error-message"]),l(r.TagInput,{modelValue:r.form.tags,"onUpdate:modelValue":e[8]||(e[8]=o=>r.form.tags=o),label:"Выберите теги"},null,8,["modelValue"]),l(r.UploadFileComponent,{modelValue:r.form.file,"onUpdate:modelValue":e[9]||(e[9]=o=>r.form.file=o),label:"Выбрать файл",error:r.form.invalid("file"),"error-message":r.form.errors.file,onChange:e[10]||(e[10]=o=>r.form.validate("file"))},null,8,["modelValue","error","error-message"]),r.previewFile?(m(),s(M,{key:1,"spinner-color":"white",src:r.previewFile.url},null,8,["src"])):c("",!0)]),_:1}),l(I,null,{default:a(()=>[l(g,{label:"Создать материал",type:"submit",color:"primary",disabled:r.form.processing},null,8,["disabled"]),l(g,{label:"Отмена",color:"secondary",onClick:r.cancel})]),_:1})]),_:1})]),_:1},8,["valid"]),l(h,{showing:r.form.processing},{default:a(()=>[l(R,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const gr=D(O,[["render",W],["__file","CreatePage.vue"]]);export{gr as default};
