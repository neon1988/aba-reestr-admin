import{i as H,b as Ee,S as U,a as G,d as k,g as se,r as X,o as Pt,e as $t,f as xt,h as It,M as Ce,j as Lt,s as Nt,k as jt,l as J,m as Fe,n as Dt,t as Q,p as pe,q as st,u as Bt,v as ie,w as ut,x as ye,y as Mt,z as Rt,A as ne,B as ct,C as Vt,D as qt,U as Le,E as Ut,F as Gt,G as zt,c as K,H as Wt,I as Kt,J as kt,K as Qt,L as he,N as Ne,O as je,P as Yt}from"./client-5NLhBQvt.js";import{r as R,a6 as Ht,J as Xt,a8 as Jt,c as ft,a7 as Zt,a5 as er,f as x,h as D,G as tr,g as we,v as rr,z as dt,p as nr,aw as ar,u as ir,ab as lr,M as or,w as sr,a as ur,_ as cr,Q as q,a1 as De,T as Be,S as de,R as z,a4 as ge,V as Z,Y as fr}from"./index-Bc0R355J.js";import{Q as Me}from"./QBadge-Ba0Rv4Xu.js";import{u as dr,a as gr}from"./use-dark-B6AwncSa.js";import{Q as gt}from"./QChip-BcyO6mis.js";import{i as vr,u as mr,c as pr,e as yr,f as hr,j as br,g as Re,d as Tr}from"./QInput-KLQz9GaB.js";import{h as Sr}from"./format-DyQxkAtJ.js";var _r="[object Symbol]";function ue(e){return typeof e=="symbol"||H(e)&&Ee(e)==_r}function vt(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var Ar=1/0,Ve=U?U.prototype:void 0,qe=Ve?Ve.toString:void 0;function mt(e){if(typeof e=="string")return e;if(G(e))return vt(e,mt)+"";if(ue(e))return qe?qe.call(e):"";var t=e+"";return t=="0"&&1/e==-Ar?"-0":t}var Er=/\s/;function Cr(e){for(var t=e.length;t--&&Er.test(e.charAt(t)););return t}var Fr=/^\s+/;function wr(e){return e&&e.slice(0,Cr(e)+1).replace(Fr,"")}var Ue=NaN,Or=/^[-+]0x[0-9a-f]+$/i,Pr=/^0b[01]+$/i,$r=/^0o[0-7]+$/i,xr=parseInt;function Ge(e){if(typeof e=="number")return e;if(ue(e))return Ue;if(k(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=k(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=wr(e);var r=Pr.test(e);return r||$r.test(e)?xr(e.slice(2),r?2:8):Or.test(e)?Ue:+e}var be=se(X,"WeakMap");function Ir(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Lr=Pt(Object.keys,Object),Nr=Object.prototype,jr=Nr.hasOwnProperty;function Dr(e){if(!$t(e))return Lr(e);var t=[];for(var r in Object(e))jr.call(e,r)&&r!="constructor"&&t.push(r);return t}function Oe(e){return xt(e)?It(e):Dr(e)}var Br=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mr=/^\w*$/;function Rr(e,t){if(G(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||ue(e)?!0:Mr.test(e)||!Br.test(e)||t!=null&&e in Object(t)}var Vr="Expected a function";function Pe(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Vr);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var l=e.apply(this,n);return r.cache=a.set(i,l)||a,l};return r.cache=new(Pe.Cache||Ce),r}Pe.Cache=Ce;var qr=500;function Ur(e){var t=Pe(e,function(n){return r.size===qr&&r.clear(),n}),r=t.cache;return t}var Gr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zr=/\\(\\)?/g,Wr=Ur(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Gr,function(r,n,i,a){t.push(i?a.replace(zr,"$1"):n||r)}),t});function Kr(e){return e==null?"":mt(e)}function ce(e,t){return G(e)?e:Rr(e,t)?[e]:Wr(Kr(e))}var kr=1/0;function $e(e){if(typeof e=="string"||ue(e))return e;var t=e+"";return t=="0"&&1/e==-kr?"-0":t}function pt(e,t){t=ce(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[$e(t[r++])];return r&&r==n?e:void 0}function le(e,t,r){var n=e==null?void 0:pt(e,t);return n===void 0?r:n}function xe(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var ze=U?U.isConcatSpreadable:void 0;function Qr(e){return G(e)||Lt(e)||!!(ze&&e&&e[ze])}function Yr(e,t,r,n,i){var a=-1,l=e.length;for(r||(r=Qr),i||(i=[]);++a<l;){var c=e[a];r(c)?xe(i,c):i[i.length]=c}return i}function Hr(e){var t=e==null?0:e.length;return t?Yr(e):[]}function Xr(e){return Nt(jt(e,void 0,Hr),e+"")}function Jr(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}function Zr(e,t){return e&&J(t,Oe(t),e)}function en(e,t){return e&&J(t,Fe(t),e)}function tn(e,t){for(var r=-1,n=e==null?0:e.length,i=0,a=[];++r<n;){var l=e[r];t(l,r,e)&&(a[i++]=l)}return a}function yt(){return[]}var rn=Object.prototype,nn=rn.propertyIsEnumerable,We=Object.getOwnPropertySymbols,Ie=We?function(e){return e==null?[]:(e=Object(e),tn(We(e),function(t){return nn.call(e,t)}))}:yt;function an(e,t){return J(e,Ie(e),t)}var ln=Object.getOwnPropertySymbols,ht=ln?function(e){for(var t=[];e;)xe(t,Ie(e)),e=Dt(e);return t}:yt;function on(e,t){return J(e,ht(e),t)}function bt(e,t,r){var n=t(e);return G(e)?n:xe(n,r(e))}function Te(e){return bt(e,Oe,Ie)}function Tt(e){return bt(e,Fe,ht)}var Se=se(X,"DataView"),_e=se(X,"Promise"),Ae=se(X,"Set"),Ke="[object Map]",sn="[object Object]",ke="[object Promise]",Qe="[object Set]",Ye="[object WeakMap]",He="[object DataView]",un=Q(Se),cn=Q(pe),fn=Q(_e),dn=Q(Ae),gn=Q(be),B=Ee;(Se&&B(new Se(new ArrayBuffer(1)))!=He||pe&&B(new pe)!=Ke||_e&&B(_e.resolve())!=ke||Ae&&B(new Ae)!=Qe||be&&B(new be)!=Ye)&&(B=function(e){var t=Ee(e),r=t==sn?e.constructor:void 0,n=r?Q(r):"";if(n)switch(n){case un:return He;case cn:return Ke;case fn:return ke;case dn:return Qe;case gn:return Ye}return t});var vn=Object.prototype,mn=vn.hasOwnProperty;function pn(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&mn.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function yn(e,t){var r=t?st(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var hn=/\w*$/;function bn(e){var t=new e.constructor(e.source,hn.exec(e));return t.lastIndex=e.lastIndex,t}var Xe=U?U.prototype:void 0,Je=Xe?Xe.valueOf:void 0;function Tn(e){return Je?Object(Je.call(e)):{}}var Sn="[object Boolean]",_n="[object Date]",An="[object Map]",En="[object Number]",Cn="[object RegExp]",Fn="[object Set]",wn="[object String]",On="[object Symbol]",Pn="[object ArrayBuffer]",$n="[object DataView]",xn="[object Float32Array]",In="[object Float64Array]",Ln="[object Int8Array]",Nn="[object Int16Array]",jn="[object Int32Array]",Dn="[object Uint8Array]",Bn="[object Uint8ClampedArray]",Mn="[object Uint16Array]",Rn="[object Uint32Array]";function Vn(e,t,r){var n=e.constructor;switch(t){case Pn:return st(e);case Sn:case _n:return new n(+e);case $n:return yn(e,r);case xn:case In:case Ln:case Nn:case jn:case Dn:case Bn:case Mn:case Rn:return Bt(e,r);case An:return new n;case En:case wn:return new n(e);case Cn:return bn(e);case Fn:return new n;case On:return Tn(e)}}var qn="[object Map]";function Un(e){return H(e)&&B(e)==qn}var Ze=ie&&ie.isMap,Gn=Ze?ut(Ze):Un,zn="[object Set]";function Wn(e){return H(e)&&B(e)==zn}var et=ie&&ie.isSet,Kn=et?ut(et):Wn,kn=1,Qn=2,Yn=4,St="[object Arguments]",Hn="[object Array]",Xn="[object Boolean]",Jn="[object Date]",Zn="[object Error]",_t="[object Function]",ea="[object GeneratorFunction]",ta="[object Map]",ra="[object Number]",At="[object Object]",na="[object RegExp]",aa="[object Set]",ia="[object String]",la="[object Symbol]",oa="[object WeakMap]",sa="[object ArrayBuffer]",ua="[object DataView]",ca="[object Float32Array]",fa="[object Float64Array]",da="[object Int8Array]",ga="[object Int16Array]",va="[object Int32Array]",ma="[object Uint8Array]",pa="[object Uint8ClampedArray]",ya="[object Uint16Array]",ha="[object Uint32Array]",$={};$[St]=$[Hn]=$[sa]=$[ua]=$[Xn]=$[Jn]=$[ca]=$[fa]=$[da]=$[ga]=$[va]=$[ta]=$[ra]=$[At]=$[na]=$[aa]=$[ia]=$[la]=$[ma]=$[pa]=$[ya]=$[ha]=!0;$[Zn]=$[_t]=$[oa]=!1;function Y(e,t,r,n,i,a){var l,c=t&kn,u=t&Qn,p=t&Yn;if(r&&(l=i?r(e,n,i,a):r(e)),l!==void 0)return l;if(!k(e))return e;var f=G(e);if(f){if(l=pn(e),!c)return Vt(e,l)}else{var o=B(e),v=o==_t||o==ea;if(ye(e))return Mt(e,c);if(o==At||o==St||v&&!i){if(l=u||v?{}:Rt(e),!c)return u?on(e,en(l,e)):an(e,Zr(l,e))}else{if(!$[o])return i?e:{};l=Vn(e,o,c)}}a||(a=new ne);var T=a.get(e);if(T)return T;a.set(e,l),Kn(e)?e.forEach(function(E){l.add(Y(E,t,r,E,e,a))}):Gn(e)&&e.forEach(function(E,C){l.set(C,Y(E,t,r,C,e,a))});var O=p?u?Tt:Te:u?Fe:Oe,y=f?void 0:O(e);return Ir(y||e,function(E,C){y&&(C=E,E=e[C]),ct(l,C,Y(E,t,r,C,e,a))}),l}var ba=1,Ta=4;function ee(e){return Y(e,ba|Ta)}var Sa="__lodash_hash_undefined__";function _a(e){return this.__data__.set(e,Sa),this}function Aa(e){return this.__data__.has(e)}function oe(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Ce;++t<r;)this.add(e[t])}oe.prototype.add=oe.prototype.push=_a;oe.prototype.has=Aa;function Ea(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function Ca(e,t){return e.has(t)}var Fa=1,wa=2;function Et(e,t,r,n,i,a){var l=r&Fa,c=e.length,u=t.length;if(c!=u&&!(l&&u>c))return!1;var p=a.get(e),f=a.get(t);if(p&&f)return p==t&&f==e;var o=-1,v=!0,T=r&wa?new oe:void 0;for(a.set(e,t),a.set(t,e);++o<c;){var O=e[o],y=t[o];if(n)var E=l?n(y,O,o,t,e,a):n(O,y,o,e,t,a);if(E!==void 0){if(E)continue;v=!1;break}if(T){if(!Ea(t,function(C,s){if(!Ca(T,s)&&(O===C||i(O,C,r,n,a)))return T.push(s)})){v=!1;break}}else if(!(O===y||i(O,y,r,n,a))){v=!1;break}}return a.delete(e),a.delete(t),v}function Oa(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function Pa(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var $a=1,xa=2,Ia="[object Boolean]",La="[object Date]",Na="[object Error]",ja="[object Map]",Da="[object Number]",Ba="[object RegExp]",Ma="[object Set]",Ra="[object String]",Va="[object Symbol]",qa="[object ArrayBuffer]",Ua="[object DataView]",tt=U?U.prototype:void 0,ve=tt?tt.valueOf:void 0;function Ga(e,t,r,n,i,a,l){switch(r){case Ua:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case qa:return!(e.byteLength!=t.byteLength||!a(new Le(e),new Le(t)));case Ia:case La:case Da:return qt(+e,+t);case Na:return e.name==t.name&&e.message==t.message;case Ba:case Ra:return e==t+"";case ja:var c=Oa;case Ma:var u=n&$a;if(c||(c=Pa),e.size!=t.size&&!u)return!1;var p=l.get(e);if(p)return p==t;n|=xa,l.set(e,t);var f=Et(c(e),c(t),n,i,a,l);return l.delete(e),f;case Va:if(ve)return ve.call(e)==ve.call(t)}return!1}var za=1,Wa=Object.prototype,Ka=Wa.hasOwnProperty;function ka(e,t,r,n,i,a){var l=r&za,c=Te(e),u=c.length,p=Te(t),f=p.length;if(u!=f&&!l)return!1;for(var o=u;o--;){var v=c[o];if(!(l?v in t:Ka.call(t,v)))return!1}var T=a.get(e),O=a.get(t);if(T&&O)return T==t&&O==e;var y=!0;a.set(e,t),a.set(t,e);for(var E=l;++o<u;){v=c[o];var C=e[v],s=t[v];if(n)var S=l?n(s,C,v,t,e,a):n(C,s,v,e,t,a);if(!(S===void 0?C===s||i(C,s,r,n,a):S)){y=!1;break}E||(E=v=="constructor")}if(y&&!E){var _=e.constructor,L=t.constructor;_!=L&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof L=="function"&&L instanceof L)&&(y=!1)}return a.delete(e),a.delete(t),y}var Qa=1,rt="[object Arguments]",nt="[object Array]",te="[object Object]",Ya=Object.prototype,at=Ya.hasOwnProperty;function Ha(e,t,r,n,i,a){var l=G(e),c=G(t),u=l?nt:B(e),p=c?nt:B(t);u=u==rt?te:u,p=p==rt?te:p;var f=u==te,o=p==te,v=u==p;if(v&&ye(e)){if(!ye(t))return!1;l=!0,f=!1}if(v&&!f)return a||(a=new ne),l||Ut(e)?Et(e,t,r,n,i,a):Ga(e,t,u,r,n,i,a);if(!(r&Qa)){var T=f&&at.call(e,"__wrapped__"),O=o&&at.call(t,"__wrapped__");if(T||O){var y=T?e.value():e,E=O?t.value():t;return a||(a=new ne),i(y,E,r,n,a)}}return v?(a||(a=new ne),ka(e,t,r,n,i,a)):!1}function Ct(e,t,r,n,i){return e===t?!0:e==null||t==null||!H(e)&&!H(t)?e!==e&&t!==t:Ha(e,t,r,n,Ct,i)}var me=function(){return X.Date.now()},Xa="Expected a function",Ja=Math.max,Za=Math.min;function ei(e,t,r){var n,i,a,l,c,u,p=0,f=!1,o=!1,v=!0;if(typeof e!="function")throw new TypeError(Xa);t=Ge(t)||0,k(r)&&(f=!!r.leading,o="maxWait"in r,a=o?Ja(Ge(r.maxWait)||0,t):a,v="trailing"in r?!!r.trailing:v);function T(m){var F=n,I=i;return n=i=void 0,p=m,l=e.apply(I,F),l}function O(m){return p=m,c=setTimeout(C,t),f?T(m):l}function y(m){var F=m-u,I=m-p,A=t-F;return o?Za(A,a-I):A}function E(m){var F=m-u,I=m-p;return u===void 0||F>=t||F<0||o&&I>=a}function C(){var m=me();if(E(m))return s(m);c=setTimeout(C,y(m))}function s(m){return c=void 0,v&&n?T(m):(n=i=void 0,l)}function S(){c!==void 0&&clearTimeout(c),p=0,n=u=i=c=void 0}function _(){return c===void 0?l:s(me())}function L(){var m=me(),F=E(m);if(n=arguments,i=this,u=m,F){if(c===void 0)return O(u);if(o)return clearTimeout(c),c=setTimeout(C,t),T(u)}return c===void 0&&(c=setTimeout(C,t)),l}return L.cancel=S,L.flush=_,L}function ti(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function ri(e,t){return t.length<2?e:pt(e,Jr(t,0,-1))}function ni(e,t){return Ct(e,t)}function ai(e,t){return t=ce(t,e),e=ri(e,t),e==null||delete e[$e(ti(t))]}function ii(e){return Gt(e)?void 0:e}var li=1,oi=2,si=4,it=Xr(function(e,t){var r={};if(e==null)return r;var n=!1;t=vt(t,function(a){return a=ce(a,e),n||(n=a.length>1),a}),J(e,Tt(e),r),n&&(r=Y(r,li|oi|si,ii));for(var i=t.length;i--;)ai(r,t[i]);return r});function ui(e,t,r,n){if(!k(e))return e;t=ce(t,e);for(var i=-1,a=t.length,l=a-1,c=e;c!=null&&++i<a;){var u=$e(t[i]),p=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(i!=l){var f=c[u];p=void 0,p===void 0&&(p=k(f)?f:zt(t[i+1])?[]:{})}ct(c,u,p),c=c[u]}return e}function Ft(e,t,r){return e==null?e:ui(e,t,r)}const ci=(e,t={})=>{const r={errorsChanged:[],touchedChanged:[],validatingChanged:[],validatedChanged:[]};let n=!1,i=!1;const a=d=>d!==i?(i=d,r.validatingChanged):[];let l=[];const c=d=>{const g=[...new Set(d)];return l.length!==g.length||!g.every(h=>l.includes(h))?(l=g,r.validatedChanged):[]},u=()=>l.filter(d=>typeof o[d]>"u");let p=[];const f=d=>{const g=[...new Set(d)];return p.length!==g.length||!g.every(h=>p.includes(h))?(p=g,r.touchedChanged):[]};let o={};const v=d=>{const g=di(d);return ni(o,g)?[]:(o=g,r.errorsChanged)},T=d=>{const g={...o};return delete g[ae(d)],v(g)},O=()=>Object.keys(o).length>0;let y=1500;const E=d=>{y=d,m.cancel(),m=L()};let C=t,s=null,S=[],_=null;const L=()=>ei(d=>{e({get:(g,h={},w={})=>K.get(g,A(h),F(w,d,h)),post:(g,h={},w={})=>K.post(g,A(h),F(w,d,h)),patch:(g,h={},w={})=>K.patch(g,A(h),F(w,d,h)),put:(g,h={},w={})=>K.put(g,A(h),F(w,d,h)),delete:(g,h={},w={})=>K.delete(g,A(h),F(w,d,h))}).catch(g=>Wt(g)||Kt(g)&&g.response?.status===422?null:Promise.reject(g))},y,{leading:!0,trailing:!0});let m=L();const F=(d,g,h={})=>{const w={...d,...g},V=Array.from(w.validate??p);return{...g,...kt(d,g),validate:V,timeout:w.timeout??5e3,onValidationError:(N,b)=>([...c([...l,...V]),...v(Qt(it({...o},V),N.data.errors))].forEach(j=>j()),w.onValidationError?w.onValidationError(N,b):Promise.reject(b)),onSuccess:N=>(c([...l,...V]).forEach(b=>b()),w.onSuccess?w.onSuccess(N):N),onPrecognitionSuccess:N=>([...c([...l,...V]),...v(it({...o},V))].forEach(b=>b()),w.onPrecognitionSuccess?w.onPrecognitionSuccess(N):N),onBefore:()=>w.onBeforeValidation&&w.onBeforeValidation({data:h,touched:p},{data:C,touched:S})===!1||(w.onBefore||(()=>!0))()===!1?!1:(_=p,s=h,!0),onStart:()=>{a(!0).forEach(N=>N()),(w.onStart??(()=>null))()},onFinish:()=>{a(!1).forEach(N=>N()),S=_,C=s,_=s=null,(w.onFinish??(()=>null))()}}},I=(d,g,h)=>{if(typeof d>"u"){m(h??{});return}if(he(g)&&!n){console.warn('Precognition file validation is not active. Call the "validateFiles" function on your form to enable it.');return}d=ae(d),le(C,d)!==g&&(f([d,...p]).forEach(w=>w()),m(h??{}))},A=d=>n===!1?wt(d):d,P={touched:()=>p,validate(d,g,h){return typeof d=="object"&&!("target"in d)&&(h=d,d=g=void 0),I(d,g,h),P},touch(d){const g=Array.isArray(d)?d:[ae(d)];return f([...p,...g]).forEach(h=>h()),P},validating:()=>i,valid:u,errors:()=>o,hasErrors:O,setErrors(d){return v(d).forEach(g=>g()),P},forgetError(d){return T(d).forEach(g=>g()),P},reset(...d){if(d.length===0)f([]).forEach(g=>g());else{const g=[...p];d.forEach(h=>{g.includes(h)&&g.splice(g.indexOf(h),1),Ft(C,h,le(t,h))}),f(g).forEach(h=>h())}return P},setTimeout(d){return E(d),P},on(d,g){return r[d].push(g),P},validateFiles(){return n=!0,P}};return P},fi=e=>Object.keys(e).reduce((t,r)=>({...t,[r]:Array.isArray(e[r])?e[r][0]:e[r]}),{}),di=e=>Object.keys(e).reduce((t,r)=>({...t,[r]:typeof e[r]=="string"?[e[r]]:e[r]}),{}),ae=e=>typeof e!="string"?e.target.name:e,wt=e=>{const t={...e};return Object.keys(t).forEach(r=>{const n=t[r];if(n!==null){if(he(n)){delete t[r];return}if(Array.isArray(n)){t[r]=n.filter(i=>!he(i));return}if(typeof n=="object"){t[r]=wt(t[r]);return}}}),t},xi=(e,t,r,n={})=>{const i=ee(r),a=Object.keys(i),l=R([]),c=R([]),u=ci(o=>o[Ne(e)](je(t),f.data(),n),i).on("validatingChanged",()=>{f.validating=u.validating()}).on("validatedChanged",()=>{l.value=u.valid()}).on("touchedChanged",()=>{c.value=u.touched()}).on("errorsChanged",()=>{f.hasErrors=u.hasErrors(),f.errors=fi(u.errors()),l.value=u.valid()}),p=o=>({...o,precognitive:!1,onStart:()=>{f.processing=!0,(o.onStart??(()=>null))()},onFinish:()=>{f.processing=!1,(o.onFinish??(()=>null))()},onValidationError:(v,T)=>(u.setErrors(v.data.errors),o.onValidationError?o.onValidationError(v):Promise.reject(T))});let f={...ee(i),data(){const o=ee(Ht(f));return a.reduce((v,T)=>({...v,[T]:o[T]}),{})},setData(o){return Object.keys(o).forEach(v=>{f[v]=o[v]}),f},touched(o){return c.value.includes(o)},touch(o){return u.touch(o),f},validate(o,v){return typeof o=="object"&&!("target"in o)&&(v=o,o=void 0),typeof o>"u"?u.validate(v):(o=ae(o),u.validate(o,le(f.data(),o),v)),f},validating:!1,valid(o){return l.value.includes(o)},invalid(o){return typeof f.errors[o]<"u"},errors:{},hasErrors:!1,setErrors(o){return u.setErrors(o),f},forgetError(o){return u.forgetError(o),f},reset(...o){const v=ee(i);return o.length===0?a.forEach(T=>f[T]=v[T]):o.forEach(T=>Ft(f,T,le(v,T))),u.reset(...o),f},setValidationTimeout(o){return u.setTimeout(o),f},processing:!1,async submit(o={}){return K[Ne(e)](je(t),f.data(),p(o))},validateFiles(){return u.validateFiles(),f},validator(){return u}};return f=Xt(f),f},lt=(e,t="info")=>{Jt.create({message:e,color:t==="success"?"green":t==="negative"?"red":"blue",timeout:3e3,position:"top",actions:[{label:"Закрыть",color:"white"}]})};function Ii(e){let t="";return Object.entries(e.errors).forEach(([,n])=>{t+=`<li>${n}</li>`}),{opts:R({color:"red",textColor:"white",icon:"error",message:`<ul class="q-ma-none q-pa-sm">${t}</ul>`,caption:e.message,html:!0})}}const gi={xs:2,sm:4,md:6,lg:10,xl:14};function ot(e,t,r){return{transform:t===!0?`translateX(${r.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const vi=ft({name:"QLinearProgress",props:{...dr,...Zt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:r}=we(),n=gr(e,r.$q),i=er(e,gi),a=x(()=>e.indeterminate===!0||e.query===!0),l=x(()=>e.reverse!==e.query),c=x(()=>({...i.value!==null?i.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),u=x(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),p=x(()=>ot(e.buffer!==void 0?e.buffer:1,l.value,r.$q)),f=x(()=>`with${e.instantFeedback===!0?"out":""}-transition`),o=x(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${f.value} q-linear-progress__track--${n.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),v=x(()=>ot(a.value===!0?1:e.value,l.value,r.$q)),T=x(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${f.value} q-linear-progress__model--${a.value===!0?"in":""}determinate`),O=x(()=>({width:`${e.value*100}%`})),y=x(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${f.value}`);return()=>{const E=[D("div",{class:o.value,style:p.value}),D("div",{class:T.value,style:v.value})];return e.stripe===!0&&a.value===!1&&E.push(D("div",{class:y.value,style:O.value})),D("div",{class:u.value,style:c.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},tr(t.default,E))}}});function W(e,t,r,n){const i=[];return e.forEach(a=>{n(a)===!0?i.push(a):t.push({failedPropValidation:r,file:a})}),i}function re(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),dt(e)}const mi={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},pi=["rejected"];function yi({editable:e,dnd:t,getFileInput:r,addFilesToQueue:n}){const{props:i,emit:a,proxy:l}=we(),c=R(null),u=x(()=>i.accept!==void 0?i.accept.split(",").map(s=>(s=s.trim(),s==="*"?"*/":(s.endsWith("/*")&&(s=s.slice(0,s.length-1)),s.toUpperCase()))):null),p=x(()=>parseInt(i.maxFiles,10)),f=x(()=>parseInt(i.maxTotalSize,10));function o(s){if(e.value)if(s!==Object(s)&&(s={target:null}),s.target!==null&&s.target.matches('input[type="file"]')===!0)s.clientX===0&&s.clientY===0&&rr(s);else{const S=r();S&&S!==s.target&&S.click(s)}}function v(s){e.value&&s&&n(null,s)}function T(s,S,_,L){let m=Array.from(S||s.target.files);const F=[],I=()=>{F.length!==0&&a("rejected",F)};if(i.accept!==void 0&&u.value.indexOf("*/")===-1&&(m=W(m,F,"accept",A=>u.value.some(P=>A.type.toUpperCase().startsWith(P)||A.name.toUpperCase().endsWith(P))),m.length===0))return I();if(i.maxFileSize!==void 0){const A=parseInt(i.maxFileSize,10);if(m=W(m,F,"max-file-size",P=>P.size<=A),m.length===0)return I()}if(i.multiple!==!0&&m.length!==0&&(m=[m[0]]),m.forEach(A=>{A.__key=A.webkitRelativePath+A.lastModified+A.name+A.size}),L===!0){const A=_.map(P=>P.__key);m=W(m,F,"duplicate",P=>A.includes(P.__key)===!1)}if(m.length===0)return I();if(i.maxTotalSize!==void 0){let A=L===!0?_.reduce((P,d)=>P+d.size,0):0;if(m=W(m,F,"max-total-size",P=>(A+=P.size,A<=f.value)),m.length===0)return I()}if(typeof i.filter=="function"){const A=i.filter(m);m=W(m,F,"filter",P=>A.includes(P))}if(i.maxFiles!==void 0){let A=L===!0?_.length:0;if(m=W(m,F,"max-files",()=>(A++,A<=p.value)),m.length===0)return I()}if(I(),m.length!==0)return m}function O(s){re(s),t.value!==!0&&(t.value=!0)}function y(s){dt(s),(s.relatedTarget!==null||nr.is.safari!==!0?s.relatedTarget!==c.value:document.elementsFromPoint(s.clientX,s.clientY).includes(c.value)===!1)===!0&&(t.value=!1)}function E(s){re(s);const S=s.dataTransfer.files;S.length!==0&&n(null,S),t.value=!1}function C(s){if(t.value===!0)return D("div",{ref:c,class:`q-${s}__dnd absolute-full`,onDragenter:re,onDragover:re,onDragleave:y,onDrop:E})}return Object.assign(l,{pickFiles:o,addFiles:v}),{pickFiles:o,addFiles:v,onDragover:O,onDragleave:y,processFiles:T,getDndNode:C,maxFilesNumber:p,maxTotalSizeNumber:f}}const hi=ft({name:"QFile",inheritAttrs:!1,props:{...vr,...mr,...mi,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...pr,...pi],setup(e,{slots:t,emit:r,attrs:n}){const{proxy:i}=we(),a=yr(),l=R(null),c=R(!1),u=hr(e),{pickFiles:p,onDragover:f,onDragleave:o,processFiles:v,getDndNode:T}=yi({editable:a.editable,dnd:c,getFileInput:g,addFilesToQueue:h}),O=br(e),y=x(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),E=x(()=>Re(y.value)),C=x(()=>y.value.map(b=>b.name).join(", ")),s=x(()=>Sr(y.value.reduce((b,j)=>b+j.size,0))),S=x(()=>({totalSize:s.value,filesNumber:y.value.length,maxFiles:e.maxFiles})),_=x(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:u.value,...n,id:a.targetUid.value,disabled:a.editable.value!==!0})),L=x(()=>"q-file q-field--auto-height"+(c.value===!0?" q-file--dnd":"")),m=x(()=>e.multiple===!0&&e.append===!0);function F(b){const j=y.value.slice();j.splice(b,1),A(j)}function I(b){const j=y.value.indexOf(b);j!==-1&&F(j)}function A(b){r("update:modelValue",e.multiple===!0?b:b[0])}function P(b){b.keyCode===13&&ir(b)}function d(b){(b.keyCode===13||b.keyCode===32)&&p(b)}function g(){return l.value}function h(b,j){const M=v(b,j,y.value,m.value),fe=g();fe!=null&&(fe.value=""),M!==void 0&&((e.multiple===!0?e.modelValue&&M.every(Ot=>y.value.includes(Ot)):e.modelValue===M[0])||A(m.value===!0?y.value.concat(M):M))}function w(){return[D("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function V(){if(t.file!==void 0)return y.value.length===0?w():y.value.map((j,M)=>t.file({index:M,file:j,ref:this}));if(t.selected!==void 0)return y.value.length===0?w():t.selected({files:y.value,ref:this});if(e.useChips===!0)return y.value.length===0?w():y.value.map((j,M)=>D(gt,{key:"file-"+M,removable:a.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{F(M)}},()=>D("span",{class:"ellipsis",textContent:j.name})));const b=e.displayValue!==void 0?e.displayValue:C.value;return b.length!==0?[D("div",{class:e.inputClass,style:e.inputStyle,textContent:b})]:w()}function N(){const b={ref:l,..._.value,...O.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:h};return e.multiple===!0&&(b.multiple=!0),D("input",b)}return Object.assign(a,{fieldClass:L,emitValue:A,hasValue:E,inputRef:l,innerValue:y,floatingLabel:x(()=>E.value===!0||Re(e.displayValue)),computedCounter:x(()=>{if(e.counterLabel!==void 0)return e.counterLabel(S.value);const b=e.maxFiles;return`${y.value.length}${b!==void 0?" / "+b:""} (${s.value})`}),getControlChild:()=>T("file"),getControl:()=>{const b={ref:a.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return a.editable.value===!0&&Object.assign(b,{onDragover:f,onDragleave:o,onKeydown:P,onKeyup:d}),D("div",b,[N()].concat(V()))}}),Object.assign(i,{removeAtIndex:F,removeFile:I,getNativeElement:()=>l.value}),ar(i,"nativeEl",()=>l.value),Tr(a)}}),bi=(e,t,r)=>{const n=new FormData;return n.append("file",e),lr.post("/files",n,{headers:{"Content-Type":"multipart/form-data"},timeout:30*60*1e3,onUploadProgress:t,signal:r})},Ti=or({__name:"UploadFileComponent",props:{modelValue:{type:[Array,Object],default:void 0},label:{type:String,default:"Выбрать файл"},error:{type:Boolean,default:!1},errorMessage:{type:String,default:void 0},multiple:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{expose:t,emit:r}){t();const n=e,i=r,a=R(null),l=R([]),c=R(null),u=R([]);sr(()=>n.modelValue,s=>{if(s){const S=Array.isArray(s)?s:[s];u.value=[...S],l.value=S.map(()=>({error:!1,percent:100})),a.value=S.map(_=>new File([_.url],_.name))}},{immediate:!0});const p=s=>["jpg","jpeg","png","gif","bmp","webp"].some(_=>s.toLowerCase().endsWith(_)),f=s=>["mp4","avi","mov","mkv"].some(_=>s.toLowerCase().endsWith(_));function o(){c.value!==null&&clearTimeout(c.value),a.value=null,l.value=[],u.value=[]}function v(){const s=n.multiple?u.value:u.value[0]||null;i("update:modelValue",s),i("change",s)}const T=s=>{const S=document.createElement("a");S.href=s,S.target="_blank",S.click()};function O(s){l.value[s]?.controller&&l.value[s].controller.abort(),a.value!==null&&a.value.splice(s,1),l.value.splice(s,1),u.value.splice(s,1),v()}async function y(){!a.value||a.value.length===0||(await a.value.reduce(async(s,S,_)=>{await s,l.value[_]===void 0&&(l.value[_]={error:!1,percent:0,controller:new AbortController});const L=l.value[_].controller,{signal:m}=L;if(l.value[_].percent<=0)try{const F=await bi(S,I=>{I.lengthComputable&&I.total&&I.loaded&&l.value[_]!==void 0&&(l.value[_].percent=I.loaded/I.total*100)},m);u.value[_]=F.data.data,l.value[_].percent=100,lt("Файлы успешно загружены","success")}catch(F){F instanceof Yt&&lt("Загрузка отменена","info"),O(_)}finally{c.value=null}},Promise.resolve()),v())}function E(s){s instanceof File&&(o(),s=[s]),s&&(a.value=[...a.value||[],...s],l.value=[...l.value||[],...s.map(S=>({error:!1,percent:0,controller:new AbortController,icon:S.type.startsWith("video/")?"movie":S.type.startsWith("image/")?"photo":S.type.startsWith("audio/")?"audiotrack":"insert_drive_file"}))],y())}ur(o);const C={props:n,emit:i,files:a,uploadProgress:l,uploading:c,uploadedFiles:u,isImage:p,isVideo:f,cleanUp:o,onChange:v,openFile:T,cancelFile:O,upload:y,updateFiles:E};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),Si={key:0},_i={class:"absolute-full flex flex-center"};function Ai(e,t,r,n,i,a){return q(),De("div",null,[Be(hi,{"model-value":n.files,"onUpdate:modelValue":n.updateFiles,label:r.label,outlined:!1,error:r.error,"error-message":r.errorMessage,multiple:r.multiple},{file:de(({index:l,file:c})=>[n.uploadProgress[l]?(q(),z(gt,{key:0,class:"full-width",removable:"",square:"",size:"xl",onRemove:u=>n.cancelFile(l)},{default:de(()=>[n.uploadedFiles[l]?(q(),De("div",Si,[n.isImage(n.uploadedFiles[l].name)?(q(),z(ge,{key:0,onClick:u=>n.openFile(n.uploadedFiles[l].url),icon:"image"},null,8,["onClick"])):n.isVideo(n.uploadedFiles[l].name)?(q(),z(ge,{key:1,onClick:u=>n.openFile(n.uploadedFiles[l].url),icon:"videocam"},null,8,["onClick"])):(q(),z(ge,{key:2,onClick:u=>n.openFile(n.uploadedFiles[l].url),icon:"description"},null,8,["onClick"]))])):Z("",!0),Be(vi,{rounded:"",value:n.uploadProgress[l].percent/100,class:"ellipsis",size:"2rem"},{default:de(()=>[fr("div",_i,[n.uploadProgress[l].percent>=100?(q(),z(Me,{key:0,color:"white","text-color":"primary",label:c.name},null,8,["label"])):Z("",!0),n.uploadProgress[l].percent<100?(q(),z(Me,{key:1,color:"white","text-color":"primary",label:n.uploadProgress[l].percent.toFixed(1)},null,8,["label"])):Z("",!0)])]),_:2},1032,["value"])]),_:2},1032,["onRemove"])):Z("",!0)]),_:1},8,["model-value","label","error","error-message","multiple"])])}const Li=cr(Ti,[["render",Ai],["__file","UploadFileComponent.vue"]]);export{Li as U,lt as a,Ii as b,xi as u};
