import{a as b,Q}from"./QToolbar-BVmsPAij.js";import{Q as v}from"./QInput-Cq_516xi.js";import{a as P,b as h,Q as d}from"./QItem-RUTCmYHM.js";import{Q as c}from"./QBadge-Cmqake8E.js";import{Q as S}from"./QList-CuUpRKuw.js";import{Q as x}from"./QBanner-DJVY2J7f.js";import{Q as y}from"./QPagination-y4JE_fTs.js";import{Q as k,a as B}from"./QInnerLoading-DS7qhBsl.js";import{Q as E}from"./QPage-6isNs5ct.js";import{N as U,O as C,P as V,w,o as L,_ as D,S as u,T as o,U as r,V as s,Y as i,$ as I,a3 as f,a4 as T,a5 as F,X as n,a0 as p}from"./index-B5fKhRmK.js";import{g as q,S as N}from"./SubscriptionLevelEnums-BvkvK72o.js";import{S as O}from"./StatusEnums-Cpn04w7a.js";import{U as R}from"./UserPhoto-DXK6EKRq.js";import{D as z}from"./DateTime-Deg1fSWP.js";import"./use-dark-CI_1RVc7.js";import"./focus-manager-BJWzFvJg.js";import"./format-DyQxkAtJ.js";import"./use-transition-4mtm_1Sm.js";import"./ImageFullscreen-Dk6LiqVP.js";const A=U("users",{state:()=>({users:[],meta:{},currentPage:1,loading:!1,status:O.OnReview,search:""}),actions:{async fetchUsers(){this.loading=!0;try{const l=await q(this.search,this.currentPage);this.users=l.data.data,this.meta=l.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}}}}),j=C({__name:"IndexPage",setup(l,{expose:a}){a();const _=V(),e=A(),g=t=>{e.currentPage=t,e.fetchUsers()};w(()=>e.search,()=>{e.fetchUsers()}),L(()=>{e.fetchUsers()});const m={router:_,store:e,handlePageChange:g,UserPhoto:R,get SubscriptionLevelEnums(){return N},DateTime:z};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),G={class:"q-gutter-md q-mb-md q-mx-sm"},M={key:1,class:"q-mt-md text-center"},X={key:2,class:"q-pa-lg flex flex-center"};function Y(l,a,_,e,g,m){return u(),o(E,{padding:""},{default:r(()=>[s(Q,null,{default:r(()=>[s(b,null,{default:r(()=>a[2]||(a[2]=[i("Пользователи")])),_:1})]),_:1}),I("div",G,[s(v,{modelValue:e.store.search,"onUpdate:modelValue":a[0]||(a[0]=t=>e.store.search=t)},null,8,["modelValue"])]),e.store.users.length>0?(u(),o(S,{key:0},{default:r(()=>[(u(!0),f(F,null,T(e.store.users,t=>(u(),o(P,{onClick:H=>e.router.push({name:"users.edit",params:{id:t.id}}),key:t.id,clickable:""},{default:r(()=>[s(h,{avatar:""},{default:r(()=>[s(e.UserPhoto,{user:t,size:"3rem",width:48,height:48},null,8,["user"])]),_:2},1024),s(h,null,{default:r(()=>[s(d,null,{default:r(()=>[i(p(t.name)+" "+p(t.lastname)+" "+p(t.middlename),1)]),_:2},1024),s(d,null,{default:r(()=>[t.subscription_level==e.SubscriptionLevelEnums.ParentsAndRelated?(u(),o(c,{key:0,label:"Родители и смежники"})):n("",!0),t.subscription_level==e.SubscriptionLevelEnums.Specialists?(u(),o(c,{key:1,label:"Специалисты"})):n("",!0),t.subscription_level==e.SubscriptionLevelEnums.Centers?(u(),o(c,{key:2,label:"Центры"})):n("",!0)]),_:2},1024),t.subscription_level!=e.SubscriptionLevelEnums.Free?(u(),o(d,{key:0},{default:r(()=>[a[3]||(a[3]=i(" Продлена до ")),s(e.DateTime,{"raw-date":t.subscription_ends_at},null,8,["raw-date"])]),_:2},1024)):n("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(u(),f("div",M,[s(x,null,{default:r(()=>a[4]||(a[4]=[i(" Нет пользователей ")])),_:1})])),e.store.meta.last_page>1?(u(),f("div",X,[e.store.meta?(u(),o(y,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[a[1]||(a[1]=t=>e.store.currentPage=t),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):n("",!0)])):n("",!0),s(B,{showing:e.store.loading},{default:r(()=>[s(k,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const pe=D(j,[["render",Y],["__file","IndexPage.vue"]]);export{pe as default};
