import{Q as g}from"./use-transition-BofM6uWm.js";import{M as y,r as w,f as n,_ as C,Q as s,R as d,S as h,a1 as f,Z as U,T as V,V as v,a4 as P}from"./index-B6qH9XSO.js";import{I as S}from"./ImageFullscreen-B6FQkzyS.js";const b=y({__name:"UserPhoto",props:{modelValue:{type:Object,required:!0},size:{type:String,default:"3rem"},fullscreen:{type:Boolean,default:!1},width:{type:Number||null,default:null},height:{type:Number||null,default:null},quality:{type:Number||null,default:null}},emits:["update:modelValue"],setup(u,{expose:l}){l();const e=u,r=w(!1),i=n(()=>e.modelValue.name?e.modelValue.name.split(" ").slice(0,2).map(t=>t.charAt(0).toUpperCase()).join(""):"U"),c=n(()=>{const a=["blue","green","red","purple","orange","teal"],t=Array.from(e.modelValue.name||"U").reduce((p,_)=>p+_.charCodeAt(0),0);return a[t%a.length]}),o=n(()=>{const a=e.modelValue.photo?.url;if(!a)return"";try{const t=new URL(a);return e.width&&t.searchParams.set("w",e.width.toString()),e.height&&t.searchParams.set("h",e.height.toString()),e.quality&&t.searchParams.set("q",e.quality.toString()),t.toString()}catch{}return a}),m={props:e,showFullscreen:r,initials:i,avatarColor:c,url:o,ImageFullscreen:S};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),k=["src","alt"],x={key:1};function F(u,l,e,r,i,c){return s(),d(P,{size:e.size,color:r.avatarColor,"text-color":"white",onClick:l[1]||(l[1]=o=>r.url&&(r.showFullscreen=!0))},{default:h(()=>[r.url?(s(),f("img",{key:0,src:r.url,alt:`${e.modelValue.name||"Пользователь"}'s avatar`,class:"avatar-image"},null,8,k)):(s(),f("span",x,U(r.initials),1)),e.fullscreen&&r.url?(s(),d(r.ImageFullscreen,{key:2,show:r.showFullscreen,"onUpdate:show":l[0]||(l[0]=o=>r.showFullscreen=o)},{default:h(()=>[V(g,{src:r.url,"spinner-color":"primary","spinner-size":"82px",width:"100%",height:"100%",fit:"scale-down"},null,8,["src"])]),_:1},8,["show"])):v("",!0)]),_:1},8,["size","color"])}const I=C(b,[["render",F],["__scopeId","data-v-f323d7ca"],["__file","UserPhoto.vue"]]);export{I as U};
