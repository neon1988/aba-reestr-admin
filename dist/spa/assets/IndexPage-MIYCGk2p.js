import{a as h,Q as k}from"./QToolbar-CNCw81R0.js";import{L as Q,M as x,N as P,o as y,_ as C,Q as s,R as u,S as t,T as a,W as m,U as b,a1 as d,a2 as v,a3 as w,V as c,Z as I}from"./index-BIoqSzkr.js";import{Q as S}from"./QCardSection-LiU8wvIw.js";import{a as B,b as p,Q as _}from"./QItem-CSPSlXK2.js";import{Q as W}from"./QList-DzszeXk4.js";import{Q as V}from"./QBanner-D7DUh8es.js";import{Q as L}from"./QPagination-BiE8y08J.js";import{Q as T,a as E}from"./QInnerLoading-CPQATF6z.js";import{Q as N}from"./QPage-C23wwPzr.js";import{g as q}from"./worksheets-BuLxUcQn.js";import{I as D}from"./ImageComponent-Ag6g7Cqh.js";import"./use-dark-r3gEVHE7.js";import"./QInput-bEU_ILxu.js";import"./focus-manager-BJWzFvJg.js";import"./format-DyQxkAtJ.js";import"./use-transition-BxwYz9Om.js";const M=Q("worksheets",{state:()=>({worksheets:[],meta:{},currentPage:1,loading:!1}),actions:{async fetchWorksheets(){this.loading=!0;try{const n=await q(this.currentPage);this.worksheets=n.data.data,this.meta=n.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}},setPage(n){this.currentPage=n}}}),R=x({__name:"IndexPage",setup(n,{expose:o}){o();const i=P(),e=M(),f=l=>{e.currentPage=l,e.fetchWorksheets()},g=l=>{i.push({name:"worksheets.edit",params:{id:l.id}})};y(()=>{e.fetchWorksheets()});const r={router:i,store:e,handlePageChange:f,viewWorksheet:g,ImageComponent:D};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),U={key:1,class:"q-mt-md text-center"},j={key:2,class:"q-pa-lg flex flex-center"};function z(n,o,i,e,f,g){return s(),u(N,{padding:""},{default:t(()=>[a(k,null,{default:t(()=>[a(h,null,{default:t(()=>o[1]||(o[1]=[m("Библиотека")])),_:1})]),_:1}),a(S,null,{default:t(()=>[a(b,{label:"Создать материал",color:"green",to:{name:"worksheets.create"}})]),_:1}),e.store.worksheets.length>0?(s(),u(W,{key:0},{default:t(()=>[(s(!0),d(w,null,v(e.store.worksheets,r=>(s(),u(B,{onClick:l=>e.viewWorksheet(r),key:r.id,clickable:""},{default:t(()=>[a(p,{avatar:""},{default:t(()=>[r.cover?(s(),u(e.ImageComponent,{key:0,url:r.cover.url,"max-width":50,"max-height":50},null,8,["url"])):c("",!0)]),_:2},1024),a(p,null,{default:t(()=>[a(_,{class:"text-h6",lines:"1"},{default:t(()=>[m(I(r.title),1)]),_:2},1024),a(_,{caption:""})]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(s(),d("div",U,[a(V,null,{default:t(()=>o[2]||(o[2]=[m(" Нет материалов ")])),_:1})])),e.store.meta.last_page>1?(s(),d("div",j,[e.store.meta?(s(),u(L,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[o[0]||(o[0]=r=>e.store.currentPage=r),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):c("",!0)])):c("",!0),a(E,{showing:e.store.loading},{default:t(()=>[a(T,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const se=C(R,[["render",z],["__file","IndexPage.vue"]]);export{se as default};
