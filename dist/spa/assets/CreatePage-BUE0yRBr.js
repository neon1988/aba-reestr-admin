import{a as F,Q as _}from"./QToolbar-fsbRQWuM.js";import{Q as n}from"./QInput-KLQz9GaB.js";import{Q as E}from"./QCardSection-CMAUuuie.js";import{M as B,N as D,r as g,w as v,a8 as U,_ as w,Q as V,R as p,S as a,T as u,W as y,V as A,Y as d,U as C}from"./index-Bc0R355J.js";import{Q as S}from"./QCardActions-vgdUSFOZ.js";import{Q as x}from"./QCard-DxBq4jcz.js";import{Q as N}from"./QForm-CO8bnY9c.js";import{Q as I,a as P}from"./QInnerLoading-BHVqACUk.js";import{Q as T}from"./QPage-SQbvXMJf.js";import{u as k,U as q,a as b,b as O}from"./UploadFileComponent-C-GoAgnv.js";import{I as R}from"./ImageComponent-m-e6C0wA.js";import"./use-dark-B6AwncSa.js";import"./focus-manager-zjdVGI5d.js";import"./ImageFullscreen-BMuWzocu.js";import"./client-5NLhBQvt.js";import"./QBadge-Ba0Rv4Xu.js";import"./QChip-BcyO6mis.js";import"./format-DyQxkAtJ.js";const j=B({__name:"CreatePage",setup(c,{expose:e}){e();const i=D(),r=g(null),m=g(null),l=k("post",()=>"/conferences",{title:"",description:"",start_at:"",end_at:"",cover:void 0,registration_url:"",price:"",file:void 0}),o=()=>{l.submit().then(()=>{b("Мероприятие успешно создано","success"),i.push("/conferences")}).catch(t=>{const{response:s}=t;if(s.status===422){const{opts:Q}=O(s.data);U.create(Q.value)}else b(s.data.message,"negative")})};v(r,t=>{t?l.start_at=new Date(t).toISOString():l.start_at=""}),v(m,t=>{t?l.end_at=new Date(t).toISOString():l.end_at=""});const f={router:i,startAt:r,endAt:m,form:l,submit:o,cancel:()=>{i.push("/conferences")},UploadFileComponent:q,ImageComponent:R};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),z={class:"row q-col-gutter-sm"},G={class:"col-6"},L={class:"col-6"};function M(c,e,i,r,m,l){return V(),p(T,{padding:""},{default:a(()=>[u(_,null,{default:a(()=>[u(F,null,{default:a(()=>e[16]||(e[16]=[y("Создание нового мероприятия")])),_:1})]),_:1}),u(N,{onSubmit:r.submit,valid:r.form.valid},{default:a(()=>[u(x,null,{default:a(()=>[u(E,null,{default:a(()=>[u(r.UploadFileComponent,{modelValue:r.form.cover,"onUpdate:modelValue":e[0]||(e[0]=o=>r.form.cover=o),label:"Выбрать обложку",error:r.form.invalid("cover"),"error-message":r.form.errors.cover,onChange:e[1]||(e[1]=o=>r.form.validate("cover"))},null,8,["modelValue","error","error-message"]),r.form.cover?(V(),p(r.ImageComponent,{key:0,url:r.form.cover.url,"spinner-color":"white",class:"q-mb-sm",fit:"scale-down","allow-fullscreen":"","quasar-component":"","max-width":200,"max-height":200},null,8,["url"])):A("",!0),u(n,{modelValue:r.form.title,"onUpdate:modelValue":e[2]||(e[2]=o=>r.form.title=o),label:"Название мероприятия",error:r.form.invalid("title"),"error-message":r.form.errors.title,onChange:e[3]||(e[3]=o=>r.form.validate("title"))},null,8,["modelValue","error","error-message"]),u(n,{modelValue:r.form.description,"onUpdate:modelValue":e[4]||(e[4]=o=>r.form.description=o),label:"Описание мероприятия",type:"textarea",error:r.form.invalid("description"),"error-message":r.form.errors.description,onChange:e[5]||(e[5]=o=>r.form.validate("description"))},null,8,["modelValue","error","error-message"]),u(n,{modelValue:r.form.registration_url,"onUpdate:modelValue":e[6]||(e[6]=o=>r.form.registration_url=o),label:"Ссылка на регистрацию",error:r.form.invalid("registration_url"),"error-message":r.form.errors.registration_url,onChange:e[7]||(e[7]=o=>r.form.validate("registration_url"))},null,8,["modelValue","error","error-message"]),u(n,{modelValue:r.form.price,"onUpdate:modelValue":e[8]||(e[8]=o=>r.form.price=o),label:"Цена",error:r.form.invalid("price"),"error-message":r.form.errors.price,onChange:e[9]||(e[9]=o=>r.form.validate("price"))},null,8,["modelValue","error","error-message"]),d("div",z,[d("div",G,[u(n,{modelValue:r.startAt,"onUpdate:modelValue":e[10]||(e[10]=o=>r.startAt=o),label:"Дата начала",type:"datetime-local",error:r.form.invalid("start_at"),"error-message":r.form.errors.start_at,onBlur:e[11]||(e[11]=o=>r.form.validate("start_at"))},null,8,["modelValue","error","error-message"])]),d("div",L,[u(n,{modelValue:r.endAt,"onUpdate:modelValue":e[12]||(e[12]=o=>r.endAt=o),label:"Дата окончания",type:"datetime-local",error:r.form.invalid("end_at"),"error-message":r.form.errors.end_at,onBlur:e[13]||(e[13]=o=>r.form.validate("end_at"))},null,8,["modelValue","error","error-message"])])]),u(r.UploadFileComponent,{modelValue:r.form.file,"onUpdate:modelValue":e[14]||(e[14]=o=>r.form.file=o),label:"Выбрать файл записи",error:r.form.invalid("file"),"error-message":r.form.errors.file,onChange:e[15]||(e[15]=o=>r.form.validate("file"))},null,8,["modelValue","error","error-message"])]),_:1}),u(S,null,{default:a(()=>[u(C,{label:"Создать мероприятие",type:"submit",color:"primary",disabled:r.form.processing},null,8,["disabled"]),u(C,{label:"Отмена",color:"secondary",onClick:r.cancel})]),_:1})]),_:1})]),_:1},8,["valid"]),u(P,{showing:r.form.processing},{default:a(()=>[u(I,{size:"5rem",color:"primary"})]),_:1},8,["showing"])]),_:1})}const sr=w(j,[["render",M],["__file","CreatePage.vue"]]);export{sr as default};
