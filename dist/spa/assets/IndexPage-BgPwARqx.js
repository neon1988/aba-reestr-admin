import{a as y,Q as P}from"./QToolbar-CSPdEhGe.js";import{Q as g}from"./QRadio-CEG8-2Sz.js";import{Q as x}from"./QCardSection-BMQ9ORDW.js";import{Q as C}from"./ImageFullscreen-C9jQqfIY.js";import{b as V,a as b,Q as v}from"./QList-DKG-1yBc.js";import{Q as k}from"./QBanner-C_5i-MuY.js";import{Q as w}from"./QPagination-DIhsWZ3e.js";import{a as E,Q as D}from"./QInnerLoading-SYvrVGDp.js";import{Q as B}from"./QPage-BXWxzvs6.js";import{a3 as R,N as F,Q as I,o as O,_ as T,S as s,T as n,U as r,V as o,Y as u,X as i,a4 as p,a5 as U,a6 as A,a0 as S}from"./index-BWeAa12D.js";import{g as L,C as N}from"./CenterPhoto-D8JteOLi.js";import{S as m}from"./StatusEnums-Cpn04w7a.js";import{u as q}from"./stat-store-tQfgxQHD.js";import"./use-dark-Bc9c4c3V.js";import"./QInput-oafD2WBG.js";import"./focus-manager-zjdVGI5d.js";const j=R("centers",{state:()=>({centers:[],meta:{},currentPage:1,loading:!1,status:m.OnReview}),actions:{async fetchCenters(){this.loading=!0;try{const l=await L(this.status,this.currentPage);this.centers=l.data.data,this.meta=l.data.meta,this.currentPage=this.meta.current_page}catch{}finally{this.loading=!1}}}}),z=F({__name:"IndexPage",setup(l,{expose:a}){a();const d=I(),e=j(),c=q(),_=()=>{e.currentPage=1,e.fetchCenters()},t=f=>{e.currentPage=f,e.fetchCenters()},Q=f=>{d.push({name:"centers.show",params:{id:f.id}})};O(()=>{e.centers.length===0&&(c.centersOnReviewCount>0?e.status=m.OnReview:e.status=m.Accepted),e.fetchCenters()});const h={router:d,store:e,statStore:c,applyFilter:_,handlePageChange:t,viewCenter:Q,get StatusEnum(){return m},CenterPhoto:N};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),G={key:1,class:"q-mt-md text-center"},M={key:2,class:"q-pa-lg flex flex-center"};function X(l,a,d,e,c,_){return s(),n(B,{padding:""},{default:r(()=>[o(P,null,{default:r(()=>[o(y,null,{default:r(()=>a[4]||(a[4]=[u("Центры")])),_:1})]),_:1}),o(x,{class:"q-mb-md"},{default:r(()=>[e.statStore.centersOnReviewCount>0?(s(),n(g,{key:0,modelValue:e.store.status,"onUpdate:modelValue":[a[0]||(a[0]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.OnReview,label:"На проверке"},null,8,["modelValue","val"])):i("",!0),o(g,{modelValue:e.store.status,"onUpdate:modelValue":[a[1]||(a[1]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Accepted,label:"Проверенные"},null,8,["modelValue","val"]),o(g,{modelValue:e.store.status,"onUpdate:modelValue":[a[2]||(a[2]=t=>e.store.status=t),e.applyFilter],val:e.StatusEnum.Rejected,label:"Отклоненные"},null,8,["modelValue","val"])]),_:1}),e.store.centers.length>0?(s(),n(V,{key:0},{default:r(()=>[(s(!0),p(A,null,U(e.store.centers,t=>(s(),n(b,{onClick:Q=>e.viewCenter(t),key:t.id,clickable:""},{default:r(()=>[o(C,{avatar:""},{default:r(()=>[o(e.CenterPhoto,{center:t,size:"4rem",fullscreen:!1,width:64,height:64},null,8,["center"])]),_:2},1024),o(C,null,{default:r(()=>[o(v,{class:"text-h6",lines:"1"},{default:r(()=>[u(S(t.name),1)]),_:2},1024),o(v,{caption:""},{default:r(()=>[u(S(t.legal_name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(s(),p("div",G,[o(k,null,{default:r(()=>a[5]||(a[5]=[u(" Нет центров ")])),_:1})])),e.store.meta.last_page>1?(s(),p("div",M,[e.store.meta?(s(),n(w,{key:0,modelValue:e.store.currentPage,"onUpdate:modelValue":[a[3]||(a[3]=t=>e.store.currentPage=t),e.handlePageChange],min:1,max:e.store.meta.last_page,"max-pages":7,"boundary-numbers":""},null,8,["modelValue","max"])):i("",!0)])):i("",!0),e.store.loading?(s(),n(E,{key:3,showing:e.store.loading},{default:r(()=>[o(D,{size:"5rem",color:"primary"})]),_:1},8,["showing"])):i("",!0)]),_:1})}const ie=T(z,[["render",X],["__file","IndexPage.vue"]]);export{ie as default};
